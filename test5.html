<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toolivo Text Analyzer | Advanced Text Analysis Tool</title>
    
    <!-- Add these to your existing head section -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Text Analyzers: Free online tool with 24 text metrics - word count, readability, keyword density & more for writers and SEO pros.">
    <meta name="keywords" content="Text Analyzers, word counter, text metrics, readability score, character count, SEO text tool, advance text counter, word calculator, free word counter, google docs">
    <meta name="author" content="Mushfikur Riad">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Toolivo Text Analyzer | Advanced Text Analysis Tool">
    <meta property="og:description" content="Text Analyzers: Free online tool with 24 text metrics - word count, readability, keyword density & more for writers and SEO pros.">
    <meta property="og:image" content="https://toolivo.github.io/tool/text-analyzer-banner.jpg">
    <meta property="og:url" content="https://toolivo.github.io/tool/text-analyzer.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Toolivo">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Toolivo Text Analyzer | Advanced Text Analysis Tool">
    <meta name="twitter:description" content="Text Analyzers: Free online tool with 24 text metrics - word count, readability, keyword density & more for writers and SEO pros.">
    <meta name="twitter:image" content="https://toolivo.github.io/tool/text-analyzer-banner.jpg">
    <meta name="twitter:creator" content="@toolivo">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#2563eb">
    <meta name="msapplication-TileColor" content="#2563eb">
    <link rel="canonical" href="https://toolivo.github.io/tool/text-analyzer.html">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://toolivo.github.io/tool/favicon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #2563eb;
            --blue-600: #2563eb;
            --blue-700: #1d4ed8;
            --blue-800: #1e40af;
            --light-bg: #ffffff;
            --light-text: #1f2937;
            --light-card: rgba(255,255,255,0.98);
            --dark-bg-1: #071127;
            --dark-bg-2: #071a2b;
            --dark-text: #e6eef8;
            --dark-card: #0f1724;
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --border-radius: 12px;
            --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --menu-width: 280px;
            --container-max-width: 1400px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--blue-600), var(--blue-700), var(--blue-800));
            color: var(--light-text);
            line-height: 1.6;
            padding: 5px;
            min-height: 100vh;
            transition: var(--transition);
            margin-top: -1.5rem;
            max-width: var(--container-max-width);
            margin-left: auto;
            margin-right: auto;
        }

        body.dark-mode {
            background: linear-gradient(135deg, var(--dark-bg-1), var(--dark-bg-2));
            color: var(--dark-text);
        }

        /* === Menu Toggle === */
        .menu-toggle {
            background: transparent;
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 6px;
            transition: background 0.3s;
            z-index: 10;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        .menu-toggle:hover {
            background: rgba(255,255,255,0.08);
        }

        body.dark-mode .menu-toggle:hover {
            background: rgba(255,255,255,0.04);
        }

        .menu-toggle span {
            display: block;
            height: 3px;
            width: 24px;
            border-radius: 2px;
            background: white;
            transition: var(--transition);
            transform-origin: center;
        }

        body.dark-mode .menu-toggle span {
            background: #e6eef8;
        }

        .menu-toggle.open span:nth-child(1) {
            transform: translateY(9px) rotate(45deg);
        }
        .menu-toggle.open span:nth-child(2) {
            opacity: 0;
        }
        .menu-toggle.open span:nth-child(3) {
            transform: translateY(-9px) rotate(-45deg);
        }
        
        /* Glowing effect for cards in dark mode — hover-only transition to preserve lazy-load animations */
        body.dark-mode .visual-card,
        body.dark-mode .tool-section,
        body.dark-mode .article-section,
        body.dark-mode .feature-card,
        body.dark-mode .troubleshooting-card,
        body.dark-mode .related-tools-card,
        body.dark-mode .steps,
        body.dark-mode .about-content,
        body.dark-mode .faq-item {
            box-shadow: 0 0 14px 3px rgba(14, 165, 233, 0.15);
        }

        /* ✅ Only apply transition to box-shadow on hover/focus — avoids overriding opacity/transform transitions */
        body.dark-mode .visual-card:hover,
        body.dark-mode .tool-section:hover,
        body.dark-mode .article-section:hover,
        body.dark-mode .feature-card:hover,
        body.dark-mode .troubleshooting-card:hover,
        body.dark-mode .related-tools-card:hover,
        body.dark-mode .steps:hover,
        body.dark-mode .about-content:hover,
        body.dark-mode .faq-item:hover {
            box-shadow: 0 0 20px 6px rgba(14, 165, 233, 0.25);
            transition: box-shadow 0.3s ease;
        }
        
        /* === Breadcrumb === */
        .breadcrumb {
            padding: 0.3rem 0.3rem;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 0 0 8px 8px;
            margin-bottom: 2px;
            margin-top: 25px
        }
        body.dark-mode .breadcrumb {
            background: rgba(255, 255, 255, 0.04);
        }
        .breadcrumb ul {
            display: flex;
            flex-wrap: wrap;
            gap: 0.1rem;
            margin: 0;
            padding: 0;
            list-style: none;
            font-size: 0.5rem;
            align-items: center;
        }
        .breadcrumb li {
            display: flex;
            align-items: center;
        }
        .breadcrumb li:not(:last-child)::after {
            content: "/";
            margin: 0 0.1rem;
            color: rgba(255, 255, 255, 0.5);
            font-weight: 600;
        }
        .breadcrumb a {
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            transition: var(--transition);
        }
        .breadcrumb a:hover {
            color: white;
        }
        body.dark-mode .breadcrumb a {
            color: rgba(230, 238, 248, 0.85);
        }
        body.dark-mode .breadcrumb a:hover {
            color: #e6eef8;
        }
        .breadcrumb li[aria-current="page"] {
            color: #e6eef8;
            font-weight: 600;
        }
        body.dark-mode .breadcrumb li[aria-current="page"] {
            color: #cbd5e1;
        }
        .breadcrumb i {
            font-size: 0.9em;
        }

        /* === Menu Card === */
        .menu-card {
            position: fixed;
            top: 80px;
            left: 20px;
            width: var(--menu-width);
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 12px 32px rgba(0,0,0,0.24);
            transform: translateX(-145%);
            transition: transform 0.36s cubic-bezier(0.22, 0.61, 0.36, 1);
            z-index: 1000;
            padding: 1.5rem;
            max-height: 80vh;
            max-width: 500px;
            overflow-y: auto;
        }
        body.dark-mode .menu-card {
            background: #0f1724;
        }

        .menu-card.open {
            transform: translateX(0);
        }

        .menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid rgba(0,0,0,0.1);
        }

        body.dark-mode .menu-header {
            border-bottom-color: rgba(255,255,255,0.1);
        }

        .menu-header h3 {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .menu-close {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: background 0.2s;
            -webkit-tap-highlight-color: transparent;
        }

        .menu-close:hover {
            background: rgba(0,0,0,0.05);
        }

        body.dark-mode .menu-close:hover {
            background: rgba(255,255,255,0.05);
        }

        .menu-close svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
        }

        .menu-list {
            list-style: none;
            padding: 0;
        }
        
        body.dark-mode .menu-close svg {
            color: #e6eef8;
        }

        .menu-item {
            margin-bottom: 0.75rem;
        }

        .menu-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 0.25rem 1rem 0.25rem 0.25rem;
            color: var(--light-text);
            text-decoration: none;
            font-weight: 500;
            font-size: 1.05rem;
            border-radius: 8px;
            transition: var(--transition);
            -webkit-tap-highlight-color: transparent;
        }

        body.dark-mode .menu-link {
            color: var(--dark-text);
        }

        .menu-link:hover {
            background: rgba(37,99,235,0.1);
            transform: translateX(4px);
        }

        body.dark-mode .menu-link:hover {
            background: rgba(14,165,233,0.12);
        }

        .menu-icon {
            width: 20px;
            opacity: 0.7;
        }

        /* Backdrop */
        .backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.45);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.24s, visibility 0.24s;
            z-index: 999;
        }

        .backdrop.visible {
            opacity: 1;
            visibility: visible;
        }

        /* Header Styles */
        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.2rem;
            padding: 0.2rem 0;
            gap: 0.8rem;
        }

        .logo-container {
            flex: 1;
            display: flex;
            justify-content: center;
        }

        .logo {
            max-width: 200px;
            height: auto;
            transition: transform 0.28s;
        }

        .logo:hover {
            transform: scale(1.04);
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #ffffff, #e0f2fe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
        }

        body.dark-mode h1 {
            background: linear-gradient(135deg, #ffffff, #e6eef8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .tagline {
            font-size: 1.3rem;
            color: #ffffff;
            font-weight: 400;
            opacity: 0.9;
        }

        body.dark-mode .tagline {
            color: var(--dark-text);
        }

        /* === Theme Toggle === */
        .theme-toggle {
            position: fixed;
            top: 16px;
            right: 16px;
            z-index: 1000;
            background: rgba(255,255,255,0.14);
            border: none;
            width: 38px;
            height: 38px;
            border-radius: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s, visibility 0.3s;
            box-shadow: 0 4px 14px rgba(0,0,0,0.12);
            -webkit-tap-highlight-color: transparent;
            opacity: 0;
            visibility: hidden;
            transform: scale(0.9) translateY(-4px);
        }

        .theme-toggle.visible {
            opacity: 1;
            visibility: visible;
            transform: scale(1) translateY(0);
        }

        body.dark-mode .theme-toggle {
            background: rgba(255,255,255,0.06);
        }

        .theme-toggle:hover {
            transform: scale(1.05);
            background: rgba(255,255,255,0.2);
        }

        body.dark-mode .theme-toggle:hover {
            background: rgba(255,255,255,0.1);
        }

        .theme-icon {
            position: absolute;
            width: 24px;
            height: 24px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            stroke: currentColor;
        }

        .sun-icon {
            opacity: 1;
            transform: rotate(0deg);
            color: #ff8c00;
        }

        .moon-icon {
            opacity: 0;
            transform: rotate(-90deg);
            color: #e6eef8;
        }

        body.dark-mode .sun-icon {
            opacity: 0;
            transform: rotate(90deg);
        }

        body.dark-mode .moon-icon {
            opacity: 1;
            transform: rotate(0deg);
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* View Transition Support */
        @supports (view-transition-name: none) {
            ::view-transition-old(root),
            ::view-transition-new(root) {
                animation: none;
                mix-blend-mode: normal;
            }
            
            ::view-transition-old(root) {
                z-index: 1;
            }
            
            ::view-transition-new(root) {
                z-index: 9999;
            }
            
            .dark-mode::view-transition-old(root) {
                z-index: 9999;
            }
            
            .dark-mode::view-transition-new(root) {
                z-index: 1;
            }
        }

        /* === Social Sharing Section === */
        .social-sharing {
            text-align: center;
            margin: 3rem 0;
            padding: 2rem 0;
            border-top: 1px solid rgba(255,255,255,0.06);
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .social-sharing h3 {
            color: white;
            margin-bottom: 1.5rem;
            font-size: 1.4rem;
            font-weight: 600;
        }

        body.dark-mode .social-sharing h3 {
            color: var(--dark-text);
        }

        .social-icons {
            display: flex;
            justify-content: center;
            gap: 0.8rem;
            flex-wrap: wrap;
        }

        .social-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1.4rem;
            transition: var(--transition);
            cursor: pointer;
            text-decoration: none;
            -webkit-tap-highlight-color: transparent;
            position: relative;
            overflow: hidden;
        }

        .social-icon:hover {
            transform: translateY(-5px) scale(1.1);
            background: rgba(255, 255, 255, 0.2);
        }

        /* Platform-specific hover colors */
        .social-icon.x-twitter:hover { background: #000000; }
        .social-icon.linkedin:hover { background: #0077B5; }
        .social-icon.facebook:hover { background: #0068FF; }
        .social-icon.whatsapp:hover { background: #25D366; }
        .social-icon.telegram:hover { background: #0088cc; }
        .social-icon.instagram:hover { background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); }
        .social-icon.reddit:hover { background: #FF4500; }
        .social-icon.pinterest:hover { background: #BD081C; }
        .social-icon.messenger:hover { background: #006AFF; }
        .social-icon.email:hover { background: #EA4335; }

        /* Click animation effect */
        .social-icon.clicked {
            animation: clickPulse 0.4s ease-out;
        }

        @keyframes clickPulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(0.9);
            }
            100% {
                transform: scale(1);
            }
        }

        /* === Footer === */
        .comprehensive-footer {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 16px;
            padding: 3rem 2rem;
            margin-top: 4rem;
            color: white;
        }

        body.dark-mode .comprehensive-footer {
            background: rgba(0, 0, 0, 0.2);
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 2.5rem;
        }

        @media (min-width: 768px) {
            .footer-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .footer-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .footer-section h4 {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            font-weight: 600;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .footer-section h4::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 2px;
            background: rgba(255, 255, 255, 0.5);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.75rem;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            -webkit-tap-highlight-color: transparent;
        }

        .footer-links a:hover {
            color: white;
            transform: translateX(5px);
        }

        .footer-links a svg {
            width: 16px;
            height: 16px;
            opacity: 0.7;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.06);
            font-size: 0.92rem;
            opacity: 0.9;
        }

        .creator-credit {
            margin-top: 1rem;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* === Tool Section Styles === */
        
    /* ============ TOOLIVO IMAGE COMPRESSOR EXACT STYLES ============ */

/* Container & Layout */
.container {
    max-width: 1400px;
    margin: 0 auto;
}

.header {
    text-align: center;
    margin-bottom: 1.5rem;
    padding: 1.5rem;
    background: linear-gradient(135deg, #2563eb, #1e40af);
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    color: white;
    position: relative;
    overflow: hidden;
}

body.dark-mode .header {
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
}

.header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
}

.header h1 {
    color: white;
    font-size: 2rem;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    text-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

body.dark-mode .header h1 {
    color: white;
}

.header p {
    color: rgba(255,255,255,0.9);
    font-size: 1rem;
    max-width: 800px;
    margin: 0 auto;
}

body.dark-mode .header p {
    color: rgba(255,255,255,0.85);
}

.badge {
    background: rgba(255,255,255,0.2);
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
    margin-left: 0.5rem;
    vertical-align: middle;
    backdrop-filter: blur(10px);
}

/* Main Grid */
.main-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 2rem;
}

@media (max-width: 1024px) {
    .main-content {
        grid-template-columns: 1fr;
    }
}

/* Card Styles */
.card {
    background-color: var(--light-card);
    border-radius: 16px;
    box-shadow: var(--box-shadow);
    overflow: hidden;
    height: 100%;
    border: none;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

body.dark-mode .card {
    background-color: var(--dark-card);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
    color: var(--dark-text);
}

.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
}

body.dark-mode .card:hover {
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.35);
}

.card-header {
    padding: 1.25rem;
    background: linear-gradient(135deg, #2563eb, #1e40af);
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

body.dark-mode .card-header {
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
}

.card-header h2 {
    color: white;
    font-size: 1.25rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-weight: 600;
}

body.dark-mode .card-header h2 {
    color: white;
}

.card-content {
    padding: 1.5rem;
}

/* Upload Area */
.upload-area {
    border: 2px dashed var(--blue-600);
    border-radius: 10px;
    padding: 2rem;
    text-align: center;
    background: rgba(37, 99, 235, 0.05);
    transition: all 0.3s ease;
    cursor: pointer;
    margin-bottom: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    outline: none;
    border-style: dashed !important;
    min-height: 150px;
}

body.dark-mode .upload-area {
    border-color: #0ea5e9;
    background: rgba(14, 165, 233, 0.05);
    color: var(--dark-text);
}

.upload-area:hover {
    border-color: var(--blue-600);
    background: rgba(37, 99, 235, 0.1);
    transform: translateY(-2px);
    border-style: dashed !important;
}

body.dark-mode .upload-area:hover {
    border-color: #0ea5e9;
    background: rgba(14, 165, 233, 0.1);
}

.upload-icon {
    font-size: 2rem;
    margin-bottom: 0.75rem;
    color: var(--blue-600);
    background: rgba(37, 99, 235, 0.1);
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: auto;
    margin-right: auto;
}

body.dark-mode .upload-icon {
    color: #0ea5e9;
    background: rgba(14, 165, 233, 0.1);
}

.upload-area h3 {
    margin-bottom: 0.25rem;
    color: var(--light-text);
    font-size: 1rem;
    font-weight: 600;
}

body.dark-mode .upload-area h3 {
    color: var(--dark-text);
}

.upload-area p {
    color: #6b7280;
    margin-bottom: 1rem;
    font-size: 0.85rem;
}

body.dark-mode .upload-area p {
    color: rgba(230, 238, 248, 0.7);
}

/* Buttons */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
    font-size: 0.875rem;
    position: relative;
    overflow: hidden;
}

.btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.5s ease;
}

.btn:hover::before {
    left: 100%;
}

.btn-primary {
    background: linear-gradient(135deg, #2563eb, #1e40af);
    color: white;
}

body.dark-mode .btn-primary {
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
    color: white;
}

.btn-primary:hover {
    background: linear-gradient(135deg, #1e40af, #2563eb);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
}

body.dark-mode .btn-primary:hover {
    background: linear-gradient(135deg, #0369a1, #0ea5e9);
    box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
}

.btn-secondary {
    background-color: #e5e7eb;
    color: #374151;
}

body.dark-mode .btn-secondary {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--dark-text);
}

.btn-secondary:hover {
    background-color: #d1d5db;
    transform: translateY(-2px);
}

body.dark-mode .btn-secondary:hover {
    background-color: rgba(255, 255, 255, 0.15);
}

.btn-success {
    background: linear-gradient(135deg, #10b981, #0da271);
    color: white;
}

body.dark-mode .btn-success {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
}

.btn-success:hover {
    background: linear-gradient(135deg, #0da271, #10b981);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.btn-danger {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: white;
}

.btn-danger:hover {
    background: linear-gradient(135deg, #dc2626, #ef4444);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
}

.btn-small {
    padding: 0.5rem 1rem;
    font-size: 0.75rem;
}

/* File Controls */
.file-controls {
    display: flex;
    justify-content: space-between;
    margin-top: 1rem;
    padding: 0.75rem;
    background: rgba(37, 99, 235, 0.05);
    border-radius: 8px;
    border: 1px solid rgba(37, 99, 235, 0.1);
}

body.dark-mode .file-controls {
    background: rgba(14, 165, 233, 0.05);
    border: 1px solid rgba(14, 165, 233, 0.1);
}

.file-controls-group {
    display: flex;
    gap: 0.5rem;
}

/* File List */
.file-list {
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    background: var(--light-card);
    margin-top: 1rem;
}

body.dark-mode .file-list {
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: var(--dark-card);
}

.file-item {
    display: flex;
    align-items: center;
    padding: 0.75rem;
    border-bottom: 1px solid #e2e8f0;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
}

body.dark-mode .file-item {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--dark-text);
}

.file-item.selected {
    background: rgba(37, 99, 235, 0.08);
    border-left: 3px solid #2563eb;
}

body.dark-mode .file-item.selected {
    background: rgba(14, 165, 233, 0.08);
    border-left: 3px solid #0ea5e9;
}

.file-item:last-child {
    border-bottom: none;
}

.file-item:hover {
    background-color: rgba(37, 99, 235, 0.05);
}

body.dark-mode .file-item:hover {
    background-color: rgba(14, 165, 233, 0.05);
}

.file-checkbox {
    width: 18px;
    height: 18px;
    margin-right: 0.75rem;
    border: 2px solid #d1d5db;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

body.dark-mode .file-checkbox {
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.file-item.selected .file-checkbox {
    background: #2563eb;
    border-color: #2563eb;
}

body.dark-mode .file-item.selected .file-checkbox {
    background: #0ea5e9;
    border-color: #0ea5e9;
}

.file-checkbox i {
    color: white;
    font-size: 0.7rem;
    opacity: 0;
}

.file-item.selected .file-checkbox i {
    opacity: 1;
}

.file-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #2563eb, #1e40af);
    border-radius: 6px;
    margin-right: 0.75rem;
    color: white;
    font-size: 0.9rem;
    flex-shrink: 0;
}

body.dark-mode .file-icon {
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
}

.file-info {
    flex: 1;
    overflow: hidden;
    min-width: 0;
}

.file-name {
    font-weight: 600;
    color: var(--light-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 0.85rem;
}

body.dark-mode .file-name {
    color: var(--dark-text);
}

.file-size {
    font-size: 0.75rem;
    color: #6b7280;
}

body.dark-mode .file-size {
    color: rgba(230, 238, 248, 0.7);
}

.file-actions {
    flex-shrink: 0;
}

.file-remove-btn {
    background: none;
    border: none;
    color: #9ca3af;
    cursor: pointer;
    width: 32px;
    height: 32px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
    transition: all 0.2s ease;
}

body.dark-mode .file-remove-btn {
    color: rgba(230, 238, 248, 0.7);
}

.file-remove-btn:hover {
    background-color: #ef4444;
    color: white;
    transform: scale(1.1);
}

/* Main Tabs */
.tabs-container-main {
    position: relative;
    margin-bottom: 1.5rem;
    background: var(--light-card);
    border-radius: 16px;
    box-shadow: var(--box-shadow);
    overflow: hidden;
}

body.dark-mode .tabs-container-main {
    background: var(--dark-card);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
}

.tabs-header-main {
    background: linear-gradient(135deg, #2563eb, #1e40af);
    padding: 20px;
    display: flex;
    gap: 8px;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
}

body.dark-mode .tabs-header-main {
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
}

.tabs-header-main::-webkit-scrollbar {
    display: none;
}

.tab-main {
    flex: 0 0 auto;
    min-width: 90px;
    padding: 12px 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    border-radius: 12px;
    transition: all 0.3s ease;
    gap: 6px;
    text-align: center;
}

.tab-main i {
    font-size: 20px;
}

.tab-main:hover {
    opacity: 0.9;
}

.tab-main.active {
    background: white;
    color: #1e40af;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transform: translateY(-2px);
}

body.dark-mode .tab-main.active {
    background: white;
    color: #0369a1;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

/* Tab Content */
.tab-content {
    display: none;
    animation: fadeIn 0.3s ease forwards;
}

.tab-content.active {
    display: block;
}

/* Quality Tab */
.method-title {
    font-size: 1.25rem;
    margin-bottom: 1.25rem;
    color: #1d4ed8;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid #e2e8f0;
    font-weight: 600;
}

body.dark-mode .method-title {
    color: #0ea5e9;
    border-bottom: 2px solid rgba(255, 255, 255, 0.1);
}

.method-title i {
    color: #2563eb;
    background: rgba(37, 99, 235, 0.1);
    width: 2rem;
    height: 2rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

body.dark-mode .method-title i {
    color: #0ea5e9;
    background: rgba(14, 165, 233, 0.1);
}

.file-size-controls {
    margin: 1.5rem 0;
}

.file-size-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
    color: #1d4ed8;
    font-weight: 600;
    font-size: 0.9rem;
}

body.dark-mode .file-size-label {
    color: #0ea5e9;
}

.file-size-label i {
    color: #2563eb;
    font-size: 0.9rem;
}

body.dark-mode .file-size-label i {
    color: #0ea5e9;
}

.size-presets {
    display: grid;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
}

.size-presets:not(.percentage-presets) {
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(2, auto);
}

.percentage-presets {
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: auto;
}

.size-preset {
    padding: 0.75rem 0.5rem;
    text-align: center;
    background: var(--light-card);
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    min-height: 70px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--light-text);
}

body.dark-mode .size-preset {
    background: var(--dark-card);
    border: 2px solid rgba(255, 255, 255, 0.1);
    color: var(--dark-text);
}

.percentage-presets .size-preset {
    min-height: 75px;
}

.size-preset:hover {
    border-color: #2563eb;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

body.dark-mode .size-preset:hover {
    border-color: #0ea5e9;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
}

.size-preset.active {
    background: linear-gradient(135deg, #2563eb, #1e40af);
    color: white;
    border-color: #2563eb;
    box-shadow: 0 6px 20px rgba(37, 99, 235, 0.2);
}

body.dark-mode .size-preset.active {
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
    border-color: #0ea5e9;
    box-shadow: 0 6px 20px rgba(14, 165, 233, 0.2);
}

.size-preset:not(.active) .size-value,
.size-preset:not(.active) .size-label {
    color: var(--light-text) !important;
}

body.dark-mode .size-preset:not(.active) .size-value,
body.dark-mode .size-preset:not(.active) .size-label {
    color: var(--dark-text) !important;
}

.size-preset.active .size-value,
.size-preset.active .size-label {
    color: white !important;
}

.size-value {
    font-size: 1rem;
    font-weight: 800;
    margin-bottom: 0.2rem;
}

.percentage-presets .size-value {
    font-size: 1.1rem;
}

.size-label {
    font-size: 0.7rem;
    opacity: 0.9;
    font-weight: 600;
}

.percentage-presets .size-label {
    font-size: 0.75rem;
}

/* Sliders */
.slider-container {
    margin: 1.5rem 0;
}

.slider-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
}

.slider-label {
    font-weight: 600;
    color: var(--light-text);
    font-size: 0.9rem;
}

body.dark-mode .slider-label {
    color: var(--dark-text);
}

.slider-value {
    font-weight: 700;
    font-size: 1rem;
    color: #1d4ed8;
    background: rgba(37, 99, 235, 0.1);
    padding: 0.25rem 0.75rem;
    border-radius: 6px;
}

body.dark-mode .slider-value {
    color: #0ea5e9;
    background: rgba(14, 165, 233, 0.1);
}

.slider {
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: #e5e7eb;
    outline: none;
    -webkit-appearance: none;
    transition: all 0.3s ease;
}

body.dark-mode .slider {
    background: rgba(255, 255, 255, 0.1);
}

.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: linear-gradient(135deg, #2563eb, #1e40af);
    cursor: pointer;
    border: 2px solid white;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    transition: all 0.2s ease;
}

body.dark-mode .slider::-webkit-slider-thumb {
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
}

.slider::-webkit-slider-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 3px 8px rgba(37, 99, 235, 0.3);
}

body.dark-mode .slider::-webkit-slider-thumb:hover {
    box-shadow: 0 3px 8px rgba(14, 165, 233, 0.3);
}

.slider-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 0.5rem;
    font-size: 0.75rem;
    color: #6b7280;
}

body.dark-mode .slider-labels {
    color: rgba(230, 238, 248, 0.6);
}

/* Quality Indicator */
.quality-indicator {
    background: var(--light-card);
    border-radius: 10px;
    padding: 1rem;
    border: 1px solid #e2e8f0;
    margin: 1.5rem 0;
}

body.dark-mode .quality-indicator {
    background: var(--dark-card);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--dark-text);
}

.quality-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
}

.quality-label {
    font-weight: 600;
    color: var(--light-text);
    font-size: 0.9rem;
}

body.dark-mode .quality-label {
    color: var(--dark-text);
}

.quality-value {
    font-weight: 700;
    color: #1d4ed8;
    font-size: 0.9rem;
}

body.dark-mode .quality-value {
    color: #0ea5e9;
}

.quality-meter {
    height: 8px;
    background: #e5e7eb;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 0.5rem;
}

body.dark-mode .quality-meter {
    background: rgba(255, 255, 255, 0.1);
}

.quality-fill {
    height: 100%;
    background: linear-gradient(90deg, #2563eb, #1e40af);
    border-radius: 4px;
    transition: width 0.3s ease;
}

body.dark-mode .quality-fill {
    background: linear-gradient(90deg, #0ea5e9, #0369a1);
}

.quality-text {
    font-size: 0.8rem;
    color: #6b7280;
    text-align: center;
    font-weight: 500;
}

body.dark-mode .quality-text {
    color: rgba(230, 238, 248, 0.6);
}

/* Smart Compression Tabs */
.tabs-row {
    margin-bottom: 1rem;
}

.tabs-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    color: #1d4ed8;
    font-weight: 600;
    font-size: 0.85rem;
}

body.dark-mode .tabs-label {
    color: #0ea5e9;
}

.tabs-label i {
    font-size: 0.9rem;
    color: #2563eb;
}

body.dark-mode .tabs-label i {
    color: #0ea5e9;
}

.tabs-container-smart {
    position: relative;
    background: linear-gradient(135deg, #2563eb, #1e40af);
    border-radius: 8px;
    padding: 0.5rem;
    overflow: hidden;
    min-height: auto;
}

body.dark-mode .tabs-container-smart {
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
}

.tabs-scroll {
    display: flex;
    gap: 0.5rem;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
}

@media (min-width: 768px) {
    .tabs-scroll {
        justify-content: space-between;
        overflow-x: visible;
    }
    
    .tab-option {
        flex: 1;
        min-width: auto;
        max-width: 140px;
    }
}

.tabs-scroll::-webkit-scrollbar {
    display: none;
}

.tab-option {
    flex: 0 0 auto;
    min-width: 100px;
    padding: 0.4rem 0.3rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: rgba(255, 255, 255, 0.8);
    font-size: 0.7rem;
    font-weight: 500;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.3s ease;
    gap: 0.3rem;
    text-align: center;
    white-space: nowrap;
    border: 2px solid transparent;
    min-height: 65px;
}

.tab-option i {
    font-size: 0.9rem;
    transition: all 0.3s ease;
}

.tab-option:hover {
    color: white;
    background: rgba(255, 255, 255, 0.15);
}

.tab-option.active {
    background: white;
    margin-right: 0.3rem;
    margin-left: 0.3rem;
    color: #1e40af;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
    transform: translateY(-1px);
}

body.dark-mode .tab-option.active {
    background: white;
    color: #0369a1;
    box-shadow: 0 1px 4px rgba(0,0,0,0.2);
}

.tab-option.active i {
    color: #1e40af;
}

body.dark-mode .tab-option.active i {
    color: #0369a1;
}

.tab-label {
    font-weight: 600;
    font-size: 0.75rem;
    line-height: 1.1;
}

.tab-desc {
    font-size: 0.65rem;
    opacity: 0.9;
    line-height: 1;
}

/* DPI Grid */
.dpi-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 0.75rem;
    margin-top: 1rem;
}

.dpi-preset {
    padding: 0.50rem;
    text-align: center;
    background: var(--light-card);
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    color: var(--light-text);
}

body.dark-mode .dpi-preset {
    background: var(--dark-card);
    border: 2px solid rgba(255, 255, 255, 0.1);
    color: var(--dark-text);
}

.dpi-preset:hover {
    border-color: #2563eb;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

body.dark-mode .dpi-preset:hover {
    border-color: #0ea5e9;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
}

.dpi-preset.active {
    background: linear-gradient(135deg, #2563eb, #1e40af);
    color: white;
    border-color: #2563eb;
    box-shadow: 0 6px 16px rgba(37, 99, 235, 0.2);
}

body.dark-mode .dpi-preset.active {
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
    border-color: #0ea5e9;
    box-shadow: 0 6px 16px rgba(14, 165, 233, 0.2);
}

.dpi-value {
    font-size: 1.75rem;
    font-weight: 800;
    margin-bottom: 0.25rem;
}

.dpi-label {
    font-size: 0.75rem;
    opacity: 0.9;
    font-weight: 600;
}

/* Action Buttons */
.action-buttons {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 1.5rem;
}

.top-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    width: 100%;
}

.action-btn {
    background: linear-gradient(135deg, #2563eb, #1e40af);
    color: white;
    border: none;
    padding: 14px;
    font-size: 14px;
    font-weight: 600;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    transition: all 0.2s ease;
    width: 100%;
    min-height: 50px;
    position: relative;
    overflow: hidden;
}

body.dark-mode .action-btn {
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
    color: white;
}

.action-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.5s ease;
}

.action-btn:hover::before {
    left: 100%;
}

.action-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
}

body.dark-mode .action-btn:hover:not(:disabled) {
    box-shadow: 0 8px 20px rgba(14, 165, 233, 0.3);
}

.action-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.action-btn.secondary {
    background: linear-gradient(135deg, #10b981, #059669);
}

body.dark-mode .action-btn.secondary {
    background: linear-gradient(135deg, #10b981, #059669);
}

.action-btn.secondary:hover:not(:disabled) {
    box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
}

/* Progress Container */
.progress-container {
    width: 100%;
    display: none;
    margin-top: 1rem;
}

.progress-container.active {
    display: block;
}

.progress-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
    align-items: center;
    font-size: 0.875rem;
    color: var(--light-text);
}

body.dark-mode .progress-header {
    color: var(--dark-text);
}

.progress-bar {
    height: 10px;
    background-color: #e5e7eb;
    border-radius: 5px;
    overflow: hidden;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
}

body.dark-mode .progress-bar {
    background-color: rgba(255, 255, 255, 0.1);
}

.progress-fill {
    height: 100%;
    background: linear-gradient(135deg, #2563eb, #1e40af);
    width: 0%;
    transition: width 0.3s ease;
}

body.dark-mode .progress-fill {
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
}

/* Results Container */
.results-container {
    display: none;
    margin-top: 1.5rem;
    padding: 1rem;
    background: rgba(16, 185, 129, 0.1);
    border-radius: 10px;
    border: 1px solid rgba(16, 185, 129, 0.2);
    transition: all 0.3s ease;
    color: var(--light-text);
}

body.dark-mode .results-container {
    background: rgba(16, 185, 129, 0.1);
    border: 1px solid rgba(16, 185, 129, 0.2);
    color: var(--dark-text);
}

.results-container.active {
    display: block;
    animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.results-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
    color: #10b981;
    font-weight: 600;
    font-size: 0.95rem;
}

body.dark-mode .results-header {
    color: #10b981;
}

.results-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.stat-card {
    background: var(--light-card);
    padding: 0.75rem;
    border-radius: 8px;
    text-align: center;
}

body.dark-mode .stat-card {
    background: var(--dark-card);
}

.stat-label {
    font-size: 0.7rem;
    color: #6b7280;
    margin-bottom: 0.25rem;
}

body.dark-mode .stat-label {
    color: rgba(230, 238, 248, 0.6);
}

.stat-value {
    font-size: 1.1rem;
    font-weight: 700;
    color: #1d4ed8;
}

body.dark-mode .stat-value {
    color: #0ea5e9;
}

.stat-value.success {
    color: #10b981;
}

body.dark-mode .stat-value.success {
    color: #10b981;
}

/* Blur effect for settings when no images */
.blurred-section {
    position: relative;
}

.blurred-section::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0);
    backdrop-filter: blur(1px);
    border-radius: 16px;
    z-index: 10;
    pointer-events: none;
    transition: all 0.3s ease;
}

body.dark-mode .blurred-section::after {
    background: rgba(7, 17, 39, 0);
}

.upload-prompt {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: var(--light-text);
    font-weight: 600;
    font-size: 1rem;
    z-index: 11;
    display: none;
    background: var(--light-card);
    padding: 20px 30px;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    border: 2px solid #2563eb;
    min-width: 250px;
}

body.dark-mode .upload-prompt {
    color: var(--dark-text);
    background: var(--dark-card);
    border: 2px solid #0ea5e9;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
}

.blurred-section .upload-prompt {
    display: block;
}

.upload-prompt i {
    font-size: 2.5rem;
    color: #2563eb;
    margin-bottom: 0.75rem;
    display: block;
}

body.dark-mode .upload-prompt i {
    color: #0ea5e9;
}

/* Empty State */
.empty-state {
    padding: 2rem 1rem;
    text-align: center;
    color: #6b7280;
}

body.dark-mode .empty-state {
    color: rgba(230, 238, 248, 0.6);
}

.empty-state i {
    font-size: 2.5rem;
    margin-bottom: 0.75rem;
    opacity: 0.3;
}

body.dark-mode .empty-state i {
    opacity: 0.2;
}

.empty-state p {
    font-size: 0.85rem;
}

/* Scrollbar */
.file-list::-webkit-scrollbar {
    width: 6px;
}

.file-list::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 3px;
}

body.dark-mode .file-list::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
}

.file-list::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 3px;
}

body.dark-mode .file-list::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
}

/* Responsive */
@media (max-width: 768px) {
    .header h1 {
        font-size: 1.5rem;
    }
    
    .card-header {
        padding: 1rem;
    }
    
    .card-content {
        padding: 1rem;
    }
    
    .main-content {
        gap: 1rem;
    }
    
    .tabs-header-main {
        padding: 16px;
        gap: 6px;
    }
    
    .tab-main {
        min-width: 85px;
        padding: 10px 12px;
        font-size: 12px;
    }
    
    .tab-main i {
        font-size: 18px;
    }
    
    .tabs-container-smart {
        padding: 0.4rem;
    }
    
    .tab-option {
        min-width: 85px;
        padding: 0.35rem 0.25rem;
        font-size: 0.65rem;
    }
    
    .tab-option i {
        font-size: 0.8rem;
    }
    
    .upload-area {
        min-height: 120px;
        padding: 1rem;
    }
    
    .upload-icon {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
        width: 50px;
        height: 50px;
    }
    
    .results-stats {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .top-row {
        gap: 8px;
    }
    
    .action-btn {
        padding: 12px 8px;
        font-size: 13px;
        min-height: 44px;
    }
    
    .action-btn i {
        font-size: 14px;
    }
    
    .size-presets {
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: auto;
    }
    
    .percentage-presets {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .size-preset {
        padding: 0.6rem 0.3rem;
        min-height: 65px;
    }
    
    .percentage-presets .size-preset {
        min-height: 70px;
    }
    
    .size-value {
        font-size: 0.9rem;
    }
    
    .size-label {
        font-size: 0.65rem;
    }
}

@media (max-width: 480px) {
    .size-presets {
        gap: 0.3rem;
    }
    
    .size-preset {
        min-height: 60px;
        padding: 0.5rem 0.25rem;
    }
    
    .percentage-presets .size-preset {
        min-height: 65px;
    }
    
    .size-value {
        font-size: 0.85rem;
    }
    
    .size-label {
        font-size: 0.6rem;
    }
}  
      
      
        /* Related Tools Section */
        .related-tools-section {
            margin-bottom: 3rem;
        }
        
        .related-tools-card {
            background: var(--light-card);
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            text-align: center;
            border: 2px dashed rgba(37, 99, 235, 0.2);
            transition: var(--transition);
        }

        body.dark-mode .related-tools-card {
            background: var(--dark-card);
            border-color: rgba(14, 165, 233, 0.2);
        }

        .related-tools-card:hover {
            border-color: var(--blue-600);
            transform: translateY(-5px);
        }

        body.dark-mode .related-tools-card:hover {
            border-color: #0ea5e9;
        }

        .related-tools-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--light-text);
        }

        body.dark-mode .related-tools-title {
            color: var(--dark-text);
        }

        .related-tools-description {
            margin-bottom: 1.5rem;
            color: #6c757d;
        }

        body.dark-mode .related-tools-description {
            color: rgba(230, 238, 248, 0.7);
        }

        .related-tools-button {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: linear-gradient(135deg, var(--blue-600), var(--blue-800));
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: var(--transition);
            margin-bottom: 0.5rem;
        }

        body.dark-mode .related-tools-button {
            background: linear-gradient(135deg, #0ea5e9, #0369a1);
        }

        .related-tools-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.3);
        }

        body.dark-mode .related-tools-button:hover {
            box-shadow: 0 6px 20px rgba(14, 165, 233, 0.3);
        }

        .connected-tools {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .connected-tool-link {
            color: var(--blue-600);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: rgba(37, 99, 235, 0.1);
            transition: var(--transition);
        }

        body.dark-mode .connected-tool-link {
            color: #0ea5e9;
            background: rgba(14, 165, 233, 0.1);
        }

        .connected-tool-link:hover {
            background: var(--blue-600);
            color: white;
        }

        body.dark-mode .connected-tool-link:hover {
            background: #0ea5e9;
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: white;
            text-align: center;
            position: relative;
            padding-bottom: 0.5rem;
        }

        body.dark-mode .section-title {
            color: var(--dark-text);
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--blue-600), var(--blue-800));
            border-radius: 2px;
            border: 1px solid #e3e4f5;
            box-sizing: border-box;
        }

        body.dark-mode .section-title::after {
            background: linear-gradient(90deg, #0ea5e9, #0369a1);
            border: none;
        }

        body.dark-mode .related-tools-title {
            color: white;
        }

        body.dark-mode .related-tools-description {
            color: rgba(255, 255, 255, 0.9);
        }

        body.dark-mode .connected-tool-link {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .connected-tool-link:hover {
            background: #0ea5e9;
            color: white;
        }

        /* Features Section */
        .features-section {
            margin-bottom: 3rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .feature-card {
            background: var(--light-card);
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            text-align: center;
            transition: var(--transition);
            border-top: 4px solid transparent;
        }

        body.dark-mode .feature-card {
            background: var(--dark-card);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-top: 4px solid var(--blue-600);
        }

        body.dark-mode .feature-card:hover {
            border-top-color: #0ea5e9;
        }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--blue-600);
            margin-bottom: 1rem;
        }

        body.dark-mode .feature-icon {
            color: #0ea5e9;
        }

        .feature-title {
            font-size: 1.3rem;
            margin-bottom: 0.8rem;
            color: var(--light-text);
        }

        body.dark-mode .feature-title {
            color: var(--dark-text);
        }

        /* How to Use Section */
        .how-to-section {
            margin-bottom: 3rem;
        }

        .steps {
            background: var(--light-card);
            border-radius: var(--border-radius);
            padding: 2.5rem;
            box-shadow: var(--box-shadow);
            position: relative;
        }

        body.dark-mode .steps {
            background: var(--dark-card);
        }

        .step {
            display: flex;
            margin-bottom: 2rem;
            position: relative;
        }

        .step:last-child {
            margin-bottom: 0;
        }

        .step::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 40px;
            bottom: -2rem;
            width: 2px;
            background: rgba(37, 99, 235, 0.1);
            z-index: 1;
        }

        body.dark-mode .step::before {
            background: rgba(14, 165, 233, 0.1);
        }

        .step:last-child::before {
            display: none;
        }

        .step-number {
            background: linear-gradient(135deg, var(--blue-600), var(--blue-800));
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1.5rem;
            flex-shrink: 0;
            z-index: 2;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3);
        }

        body.dark-mode .step-number {
            background: linear-gradient(135deg, #0ea5e9, #0369a1);
            box-shadow: 0 4px 10px rgba(14, 165, 233, 0.3);
        }

        .step-content h3 {
            margin-bottom: 0.5rem;
            color: var(--light-text);
        }

        body.dark-mode .step-content h3 {
            color: var(--dark-text);
        }

        /* === REDESIGNED ARTICLE SECTION === */
        .article-section {
            background: var(--light-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.8rem;
            margin-bottom: 3rem;
            overflow: hidden;
            border-left: 4px solid var(--blue-600);
        }

        body.dark-mode .article-section {
            background: var(--dark-card);
            border-left: 4px solid #0ea5e9;
        }

        .article-header {
            text-align: center;
            margin-bottom: 1.8rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(37, 99, 235, 0.1);
        }

        body.dark-mode .article-header {
            border-bottom-color: rgba(14, 165, 233, 0.1);
        }

        .article-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, var(--blue-600), var(--blue-800));
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
        }

        body.dark-mode .article-badge {
            background: linear-gradient(135deg, #0ea5e9, #0369a1);
        }

        .article-title {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            color: var(--light-text);
            line-height: 1.3;
            font-weight: 700;
        }

        body.dark-mode .article-title {
            color: var(--dark-text);
        }

        .article-subtitle {
            font-size: 1.1rem;
            color: #6b7280;
            font-weight: 400;
        }

        body.dark-mode .article-subtitle {
            color: rgba(230, 238, 248, 0.7);
        }

        /* Article Single Column Container */
        .article-single-content {
            display: block;
            width: 100%;
        }

        @media (min-width: 768px) {
            .article-single-content {
                max-width: 800px;
                margin: 0 auto;
            }
        }

        .article-intro {
            background: rgba(37, 99, 235, 0.05);
            border-radius: 10px;
            padding: 1.2rem;
            margin-bottom: 1.2rem;
            border-left: 3px solid var(--blue-600);
        }

        body.dark-mode .article-intro {
            background: rgba(14, 165, 233, 0.05);
            border-left: 3px solid #0ea5e9;
        }

        .article-intro p {
            margin: 0;
            font-size: 1.05rem;
            line-height: 1.6;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.8rem;
            margin: 1.2rem 0;
        }

        @media (min-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 0.8rem;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: var(--transition);
        }

        body.dark-mode .stat-card {
            background: rgba(14, 165, 233, 0.08);
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.15);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--blue-600);
            margin-bottom: 0.2rem;
        }

        body.dark-mode .stat-value {
            color: #0ea5e9;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #6b7280;
            font-weight: 500;
        }

        body.dark-mode .stat-label {
            color: rgba(230, 238, 248, 0.7);
        }

        /* Content Sections */
        .content-section {
            margin-bottom: 1.8rem;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.8rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(37, 99, 235, 0.1);
        }

        body.dark-mode .section-header {
            border-bottom-color: rgba(14, 165, 233, 0.1);
        }

        .section-icon {
            color: var(--blue-600);
            font-size: 1.2rem;
        }

        body.dark-mode .section-icon {
            color: #0ea5e9;
        }

        .section-title-sm {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--light-text);
            margin: 0;
        }

        body.dark-mode .section-title-sm {
            color: var(--dark-text);
        }

        .section-content {
            font-size: 1rem;
            line-height: 1.6;
            color: var(--light-text);
        }

        body.dark-mode .section-content {
            color: var(--dark-text);
        }

        .section-content p {
            margin-bottom: 0.8rem;
            font-size: 1.02rem;
        }

        .section-content ul,
        .section-content ol {
            margin: 1rem 0 1rem 1.5rem;
        }

        .section-content li {
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }

        /* Subheadings in content */
        .content-subheading {
            font-size: 1.15rem;
            font-weight: 600;
            color: var(--blue-600);
            margin: 1.5rem 0 0.8rem 0;
            padding-bottom: 0.3rem;
            border-bottom: 1px solid rgba(37, 99, 235, 0.1);
        }

        body.dark-mode .content-subheading {
            color: #0ea5e9;
            border-bottom-color: rgba(14, 165, 233, 0.1);
        }

        /* Tips Box */
        .tips-box {
            background: rgba(37, 99, 235, 0.08);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 3px solid var(--blue-600);
        }

        body.dark-mode .tips-box {
            background: rgba(14, 165, 233, 0.08);
            border-left: 3px solid #0ea5e9;
        }

        .tips-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            color: var(--blue-600);
            font-weight: 600;
            font-size: 1.05rem;
        }

        body.dark-mode .tips-header {
            color: #0ea5e9;
        }

        .tips-list {
            list-style: none;
            padding-left: 0;
        }

        .tips-list li {
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .tips-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--blue-600);
            font-weight: bold;
        }

        body.dark-mode .tips-list li:before {
            color: #0ea5e9;
        }

        /* Article Image - Compact */
.article-image-compact {
    width: 100%;
    border-radius: 12px;
    overflow: hidden;
    margin: 1.5rem 0;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

body.dark-mode .article-image-compact {
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.article-image-compact img {
    width: 100%;
    height: 180px; /* Default height for mobile */
    object-fit: cover;
    transition: transform 0.3s ease;
}

.article-image-compact img:hover {
    transform: scale(1.05);
}

/* Desktop styles - 300px height */
@media (min-width: 768px) {
    .article-image-compact img {
        height: 300px;
    }
}

/* Optional: Adjust for very large screens */
@media (min-width: 1200px) {
    .article-image-compact img {
        height: 350px; /* Slightly taller for large desktop */
    }
}

        /* Platform Cards */
        .platform-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.8rem;
            margin: 1rem 0;
        }

        .platform-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 6px;
            padding: 0.6rem;
            text-align: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            transition: var(--transition);
        }

        body.dark-mode .platform-card {
            background: rgba(14, 165, 233, 0.08);
        }

        .platform-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(37, 99, 235, 0.15);
        }

        .platform-name {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 0.2rem;
            color: var(--light-text);
        }

        body.dark-mode .platform-name {
            color: var(--dark-text);
        }

        .platform-limit {
            font-size: 0.8rem;
            color: #6b7280;
        }

        body.dark-mode .platform-limit {
            color: rgba(230, 238, 248, 0.7);
        }

        .platform-details {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.2rem;
        }

        body.dark-mode .platform-details {
            color: rgba(230, 238, 248, 0.6);
        }

        /* See More Button */
        .see-more-btn {
            display: block;
            margin: 2rem auto;
            padding: 0.8rem 2rem;
            background: var(--blue-600);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            max-width: 200px;
        }

        body.dark-mode .see-more-btn {
            background: #0ea5e9;
        }

        .see-more-btn:hover {
            background: var(--blue-700);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.3);
        }

        body.dark-mode .see-more-btn:hover {
            background: #0284c7;
            box-shadow: 0 6px 20px rgba(14, 165, 233, 0.3);
        }

        .see-more-content {
            margin-top: 1rem;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .see-more-content:not([hidden]) {
            opacity: 1;
            transform: translateY(0);
        }

        /* Final Insight Box */
        .final-insight {
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(37, 99, 235, 0.05);
            border-radius: 8px;
            border-left: 3px solid var(--blue-600);
            font-size: 1.05rem;
        }

        body.dark-mode .final-insight {
            background: rgba(14, 165, 233, 0.05);
            border-left: 3px solid #0ea5e9;
        }

        .final-insight strong {
            color: var(--blue-600);
        }

        body.dark-mode .final-insight strong {
            color: #0ea5e9;
        }

        /* FAQ Section */
        .faq-section {
            margin-bottom: 3rem;
        }

        .faq-item {
            background: var(--light-card);
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            box-shadow: var(--box-shadow);
            overflow: hidden;
            transition: var(--transition);
            cursor: pointer;
            outline: none;
        }

        body.dark-mode .faq-item {
            background: var(--dark-card);
        }

        .faq-item:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }

        /* Theme-colored stroke on focus */
        .faq-item:focus {
            outline: 2px solid var(--blue-600);
            outline-offset: 2px;
        }

        body.dark-mode .faq-item:focus {
            outline: 2px solid #0ea5e9;
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);
        }

        .faq-question {
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            transition: var(--transition);
            color: var(--light-text);
            outline: none;
        }

        body.dark-mode .faq-question {
            color: var(--dark-text);
        }

        .faq-question:hover {
            background: rgba(37, 99, 235, 0.05);
        }

        body.dark-mode .faq-question:hover {
            background: rgba(14, 165, 233, 0.05);
        }

        .faq-answer {
            padding: 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.3s ease;
            color: var(--light-text);
        }

        body.dark-mode .faq-answer {
            color: var(--dark-text);
        }

        .faq-item.active .faq-answer {
            padding: 0 1.5rem 1.5rem;
            max-height: 500px;
            margin-top: 1rem;
        }

        .faq-item.active .faq-question {
            background: rgba(37, 99, 235, 0.05);
            border-bottom: 1px solid rgba(37, 99, 235, 0.1);
        }

        body.dark-mode .faq-item.active .faq-question {
            background: rgba(14, 165, 233, 0.05);
            border-bottom: 1px solid rgba(14, 165, 233, 0.1);
        }

        .faq-icon {
            transition: transform 0.4s ease;
            color: var(--blue-600);
        }

        body.dark-mode .faq-icon {
            color: #0ea5e9;
        }

        .faq-item.active .faq-icon {
            transform: rotate(45deg);
        }

        /* Troubleshooting Section */
        .troubleshooting-section {
            margin-bottom: 3rem;
        }

        .troubleshooting-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        
        .hero-text {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 1.5rem 0;
        }

        .hero-text h1,
        .hero-text .tagline {
            text-align: center;
            margin: 0;
        }

        .troubleshooting-card {
            background: var(--light-card);
            border-radius: var(--border-radius);
            padding: 1.8rem;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }

        body.dark-mode .troubleshooting-card {
            background: var(--dark-card);
        }

        .troubleshooting-card:hover {
            transform: translateY(-5px);
        }

        .troubleshooting-card h3 {
            color: var(--blue-600);
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        body.dark-mode .troubleshooting-card h3 {
            color: #0ea5e9;
        }

        /* About Section */
        .about-section {
            margin-bottom: 3rem;
        }

        .about-content {
            background: var(--light-card);
            border-radius: var(--border-radius);
            padding: 2.5rem;
            box-shadow: var(--box-shadow);
        }

        body.dark-mode .about-content {
            background: var(--dark-card);
        }

        /* Lazy loading animation styles */
        .lazy-section {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .lazy-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Animation for numbers */
        @keyframes countUp {
            from {
                transform: translateY(10px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .counting {
            animation: countUp 0.5s ease-out;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .article-section, .steps, .about-content {
                padding: 1.2rem;
            }
            
            .article-title {
                font-size: 1.5rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .step::before {
                display: none;
            }
            
            .step {
                flex-direction: column;
            }
            
            .step-number {
                margin-right: 0;
                margin-bottom: 1rem;
                align-self: flex-start;
            }
        }

        /* Light mode link color */
        .article-section a {
            color: #2563ea;
            text-decoration: none;
            transition: 0.2s ease;
            font-weight: 500;
        }

        .article-section a:hover {
            color: #1d4ed8;
            text-decoration: underline;
        }

        /* Dark mode link color */
        body.dark-mode .article-section a {
            color: #10a5e7;
        }

        body.dark-mode .article-section a:hover {
            color: #17b8ff;
            text-decoration: underline;
        }

        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #2563ea;
            color: #ffffff;
            border: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transform: scale(0.85);
            transition: opacity 0.3s ease, transform 0.3s cubic-bezier(0.2, 0.6, 0.4, 1);
            z-index: 1000;
        }

        .back-to-top:hover {
            background: #2563ea;
            color: #ffffff;
            transform: scale(1.08);
        }

        body.dark-mode .back-to-top {
            background: #0ea5e9;
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
        }

        body.dark-mode .back-to-top:hover {
            background: #0ea5e9;
            color: #ffffff;
            transform: scale(1.08);
        }

        .back-to-top.show {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
        }

        .back-to-top svg {
            stroke: currentColor;
        }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
<nav aria-label="Breadcrumb" class="breadcrumb">
    <ul>
        <li><a href="https://toolivo.github.io/tool/"><i class="fas fa-home"></i> Home</a></li>
        <li><a href="https://toolivo.github.io/tool/">Tools</a></li>
        <li aria-current="page">Text Analyzer</li>
    </ul>
</nav>
    <!-- Compact Menu Card -->
    <div class="menu-card" id="menuCard">
        <div class="menu-header">
            <h3>Menu</h3>
            <button class="menu-close" id="menuClose" aria-label="Close menu">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
      <ul class="menu-list">

    <!-- Home -->
    <li class="menu-item">
        <a href="index.html" class="menu-link">
            <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
            Home
        </a>
    </li>

    <!-- Tools -->
    <li class="menu-item">
        <a href="https://toolivo.github.io/tool/" class="menu-link">
        <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
  <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
</svg>
            Tools
        </a>
    </li>

    <!-- Blog -->
    <li class="menu-item">
        <a href="blog.html" class="menu-link">
            <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                <path d="M4 19h16V5H4v14z"/>
                <line x1="8" y1="9" x2="16" y2="9"/>
                <line x1="8" y1="13" x2="16" y2="13"/>
            </svg>
            Blog
        </a>
    </li>

    <!-- Community -->
    <li class="menu-item">
        <a href="community.html" class="menu-link">
            <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
            Community
        </a>
    </li>

    <!-- Request a Tool -->
    <li class="menu-item">
        <a href="request-a-tool.html" class="menu-link">
            <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                <path d="M4 20h4l10.6-10.6a3 3 0 1 0-4.2-4.2L4 16v4z"/>
                <line x1="13.5" y1="6.5" x2="17.5" y2="10.5"/>
            </svg>
            Request a Tool
        </a>
    </li>

    <!-- About Us -->
    <li class="menu-item">
        <a href="about-us.html" class="menu-link">
            <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="16" x2="12" y2="12"/>
                <line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
            About Us
        </a>
    </li>

    <!-- Contact Us -->
    <li class="menu-item">
        <a href="contact-us.html" class="menu-link">
            <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                <polyline points="22,6 12,13 2,6"/>
            </svg>
            Contact Us
        </a>
    </li>

</ul>
    </div>
    <div class="backdrop" id="backdrop"></div>

    <!-- Header -->
<header>
    <button class="menu-toggle" id="menuToggle" aria-label="Open menu">
        <span></span>
        <span></span>
        <span></span>
    </button>
    <div class="logo-container">
        <a href="https://toolivo.github.io/tool/">
            <img 
                src="https://toolivo.github.io/tool/toolivo-logo.webp"
                alt="Toolivo Logo"
                class="logo"
                loading="lazy"
            >
        </a>
    </div>
    <!-- 👇 Placeholder to keep layout balanced -->
    <div style="width: 48px;"></div>


<!-- 👇 Fixed theme toggle — outside header, but visually in top-right -->
<!-- 👇 Animated Theme Toggler -->
<button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
    <svg class="theme-icon sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <circle cx="12" cy="12" r="5" fill="none" stroke="currentColor" stroke-width="2"/>
        <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2"/>
        <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2"/>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2"/>
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2"/>
        <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2"/>
        <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2"/>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2"/>
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="theme-icon moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <span class="sr-only">Toggle theme</span>
</button>
</header>

    <!-- Hero Section -->
    <div class="hero-text">
    <h1>Image Compressor</h1>
    <p class="tagline">Instant text insights with clear, real-time metrics.</p>
</div>

    <!-- Image Compressor Tool Section -->


    <div class="main-content">
        <!-- Left Column: Upload & File Management -->
        <div class="card">
            <div class="card-header">
                <h2><i class="fas fa-upload"></i> Upload Images</h2>
                <span class="file-count">0 files</span>
            </div>
            <div class="card-content">
                <!-- Upload Area -->
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <h3>Drag & Drop Images</h3>
                    <p>JPG, PNG, GIF, WebP, BMP supported</p>
                    <button class="btn btn-primary" id="browseBtn">
                        <i class="fas fa-folder-open"></i> Browse Files
                    </button>
                    <input type="file" id="fileInput" multiple accept="image/*" style="display: none;">
                </div>

                <!-- File Controls -->
                <div class="file-controls">
                    <div class="file-controls-group">
                        <button class="btn btn-primary btn-small" id="selectAllBtn">
                            <i class="fas fa-check"></i> Select All
                        </button>
                        <button class="btn btn-secondary btn-small" id="deselectAllBtn">
                            <i class="fas fa-times"></i> None
                        </button>
                    </div>
                    <button class="btn btn-danger btn-small" id="clearAllBtn">
                        <i class="fas fa-trash-alt"></i> Clear All
                    </button>
                </div>

                <!-- File List -->
                <div class="file-list" id="fileList">
                    <div class="empty-state">
                        <i class="fas fa-images"></i>
                        <p>No images uploaded yet</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column: Resize Settings & Preview -->
        <div class="card blurred-section" id="settingsSection">
            <!-- Upload prompt shown when no images -->
            <div class="upload-prompt" id="uploadPrompt">
                <i class="fas fa-cloud-upload-alt"></i>
                <div>Upload images to enable settings</div>
            </div>
            
            <div class="card-header">
                <h2><i class="fas fa-sliders-h"></i> Resizing Methods & Settings</h2>
            </div>
            <div class="card-content" id="settingsContent">
                <!-- Main Tab System for Switching Between Methods -->
                <div class="tabs-container-main">
                    <div class="tabs-header-main">
                        <!-- REARRANGED TABS: Quality first, then Smart, File Size, Percentage, DPI -->
                        <div class="tab-main active" data-tab="quality">
                            <i class="fas fa-compress-alt"></i>
                            <span>Quality</span>
                        </div>
                        <div class="tab-main" data-tab="smart-compression">
                            <i class="fas fa-brain"></i>
                            <span>Smart</span>
                        </div>
                        <div class="tab-main" data-tab="file-size">
                            <i class="fas fa-weight-hanging"></i>
                            <span>File Size</span>
                        </div>
                        <div class="tab-main" data-tab="percentage">
                            <i class="fas fa-percentage"></i>
                            <span>Percentage</span>
                        </div>
                        <div class="tab-main" data-tab="dpi">
                            <i class="fas fa-expand"></i>
                            <span>DPI</span>
                        </div>
                    </div>
                </div>

                <!-- Quality Tab -->
                <div class="tab-content active" id="quality-content">
                    <h3 class="method-title"><i class="fas fa-compress-alt"></i> Quality-Based Compression</h3>
                    
                    <!-- 4 COMPACT PRESETS -->
                    <div class="file-size-controls">
                        <div class="file-size-label">
                            <i class="fas fa-bullseye"></i> Quick Quality Presets
                        </div>
                        
                        <div class="size-presets percentage-presets">
                            <div class="size-preset active" data-quality="25">
                                <div class="size-value">Low</div>
                                <div class="size-label">Smallest Size</div>
                            </div>
                            <div class="size-preset" data-quality="50">
                                <div class="size-value">Medium</div>
                                <div class="size-label">Balanced</div>
                            </div>
                            <div class="size-preset" data-quality="75">
                                <div class="size-value">High</div>
                                <div class="size-label">Good Quality</div>
                            </div>
                            <div class="size-preset" data-quality="90">
                                <div class="size-value">Best</div>
                                <div class="size-label">Maximum Quality</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quality Slider -->
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label" style="display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-sliders-h"></i> Fine-Tune Quality
                            </span>
                            <span class="slider-value" id="qualityValueTab">50%</span>
                        </div>
                        <input type="range" class="slider" id="qualitySliderTab" min="1" max="100" value="50" step="1">
                        <div class="slider-labels">
                            <span>Lowest (1%)</span>
                            <span>Highest (100%)</span>
                        </div>
                    </div>
                    
                    <!-- Quality Info -->
                    <div class="quality-indicator" style="margin-top: 1.5rem;">
                        <div class="quality-header">
                            <span class="quality-label">Compression Level</span>
                            <span class="quality-value" id="compressionLevelText">Medium</span>
                        </div>
                        <div class="quality-meter">
                            <div class="quality-fill" id="compressionFill"></div>
                        </div>
                        <div class="quality-text" id="compressionDescription">Good balance of quality and file size</div>
                    </div>
                </div>

                <!-- Smart Compression Content -->
                <div class="tab-content" id="smart-compression-content">
                    <!-- Mode Selection (Horizontal Row 1) -->
                    <h3 class="method-title"><i class="fas fa-brain"></i>Smart Compression</h3>
                    <div class="tabs-row">
                        <div class="tabs-label">
                            <i class="fas fa-cog"></i> Compression Mode
                        </div>
                        <div class="tabs-container-smart">
                            <div class="tabs-scroll" id="modeTabs">
                                <div class="tab-option active" data-mode="perceptual">
                                    <i class="fas fa-eye"></i>
                                    <div class="tab-label">Perceptual</div>
                                    <div class="tab-desc">Balanced</div>
                                </div>
                                <div class="tab-option" data-mode="max-compression">
                                    <i class="fas fa-compress-alt"></i>
                                    <div class="tab-label">Max Compress</div>
                                    <div class="tab-desc">Smallest files</div>
                                </div>
                                <div class="tab-option" data-mode="lossless">
                                    <i class="fas fa-gem"></i>
                                    <div class="tab-label">Lossless</div>
                                    <div class="tab-desc">Perfect quality</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Usage Selection (Horizontal Row 2) -->
                    <div class="tabs-row">
                        <div class="tabs-label">
                            <i class="fas fa-bullseye"></i> Target Usage
                        </div>
                        <div class="tabs-container-smart">
                            <div class="tabs-scroll" id="usageTabs">
                                <div class="tab-option active" data-usage="web">
                                    <i class="fas fa-globe"></i>
                                    <div class="tab-label">Web</div>
                                    <div class="tab-desc">Fast loading</div>
                                </div>
                                <div class="tab-option" data-usage="social">
                                    <i class="fas fa-share-alt"></i>
                                    <div class="tab-label">Social Media</div>
                                    <div class="tab-desc">Optimized</div>
                                </div>
                                <div class="tab-option" data-usage="print">
                                    <i class="fas fa-print"></i>
                                    <div class="tab-label">Print/PDF</div>
                                    <div class="tab-desc">High quality</div>
                                </div>
                                <div class="tab-option" data-usage="email">
                                    <i class="fas fa-envelope"></i>
                                    <div class="tab-label">Email</div>
                                    <div class="tab-desc">Small files</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quality vs Size Slider -->
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Quality vs Size</span>
                            <span class="slider-value" id="smartBalanceValue">Balanced</span>
                        </div>
                        <input type="range" class="slider" id="smartBalanceSlider" min="1" max="100" value="50">
                        <div class="slider-labels">
                            <span>Smaller Size</span>
                            <span>Better Quality</span>
                        </div>
                    </div>

                    <!-- More Settings Dropdown -->
                    <div class="more-settings">
                        <button class="settings-toggle" id="settingsToggle">
                            <span><i class="fas fa-cog"></i> More Settings</span>
                            <i class="fas fa-chevron-down" id="settingsIcon"></i>
                        </button>
                        <div class="settings-content" id="smartSettingsContent">
                            <div class="settings-grid">
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <div class="setting-icon">
                                            <i class="fas fa-user-circle"></i>
                                        </div>
                                        <div class="setting-text">
                                            <div class="setting-label">Face Protection</div>
                                            <div class="setting-desc">Preserve facial details</div>
                                        </div>
                                    </div>
                                    <input type="checkbox" id="faceDetection" checked>
                                </div>
                                
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <div class="setting-icon">
                                            <i class="fas fa-font"></i>
                                        </div>
                                        <div class="setting-text">
                                            <div class="setting-label">Text Clarity</div>
                                            <div class="setting-desc">Keep text readable</div>
                                        </div>
                                    </div>
                                    <input type="checkbox" id="textProtection" checked>
                                </div>
                                
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <div class="setting-icon">
                                            <i class="fas fa-info-circle"></i>
                                        </div>
                                        <div class="setting-text">
                                            <div class="setting-label">Remove Metadata</div>
                                            <div class="setting-desc">EXIF, GPS, camera data</div>
                                        </div>
                                    </div>
                                    <input type="checkbox" id="metadataRemoval" checked>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quality Indicator -->
                    <div class="quality-indicator">
                        <div class="quality-header">
                            <span class="quality-label">Expected Quality</span>
                            <span class="quality-value" id="smartQualityText">Excellent</span>
                        </div>
                        <div class="quality-meter">
                            <div class="quality-fill" id="smartQualityFill"></div>
                        </div>
                        <div class="quality-text" id="qualityDescription">Optimized for your selected settings</div>
                    </div>
                </div>

                <!-- File Size Method -->
                <div class="tab-content" id="file-size-content">
                    <h3 class="method-title"><i class="fas fa-weight-hanging"></i> Target File Size</h3>
                    
                    <!-- Size Presets - 6 PRESETS -->
                    <div class="file-size-controls">
                        <div class="file-size-label">
                            <i class="fas fa-bullseye"></i> Target File Size Presets
                        </div>
                        
                        <div class="size-presets">
                            <div class="size-preset active" data-size="100">
                                <div class="size-value">100 KB</div>
                                <div class="size-label">Web Thumbnail</div>
                            </div>
                            <div class="size-preset" data-size="250">
                                <div class="size-value">250 KB</div>
                                <div class="size-label">Small Web</div>
                            </div>
                            <div class="size-preset" data-size="500">
                                <div class="size-value">500 KB</div>
                                <div class="size-label">Web Standard</div>
                            </div>
                            <div class="size-preset" data-size="1000">
                                <div class="size-value">1 MB</div>
                                <div class="size-label">Hi-res</div>
                            </div>
                            <div class="size-preset" data-size="2000">
                                <div class="size-value">2 MB</div>
                                <div class="size-label">Photography</div>
                            </div>
                            <div class="size-preset" data-size="3000">
                                <div class="size-value">3 MB</div>
                                <div class="size-label">Print Ready</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Slider -->
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label" style="display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-sliders-h"></i> Fine-Tune Target Size
                            </span>
                            <span class="slider-value" id="fileSizeValue">500 KB</span>
                        </div>
                        <input type="range" class="slider" id="fileSizeSlider" min="5" max="5000" value="500" step="5">
                        <div class="slider-labels">
                            <span>5 KB</span>
                            <span id="maxSizeLabel">Max File Size</span>
                        </div>
                    </div>
                </div>

                <!-- Percentage Method -->
                <div class="tab-content" id="percentage-content">
                    <h3 class="method-title"><i class="fas fa-percentage"></i> Scale by Percentage</h3>
                    
                    <!-- 4 COMPACT PRESETS -->
                    <div class="file-size-controls">
                        <div class="file-size-label">
                            <i class="fas fa-bullseye"></i> Quick Percentage Presets
                        </div>
                        
                        <div class="size-presets percentage-presets">
                            <div class="size-preset active" data-percentage="25">
                                <div class="size-value">25%</div>
                                <div class="size-label">Thumbnail</div>
                            </div>
                            <div class="size-preset" data-percentage="50">
                                <div class="size-value">50%</div>
                                <div class="size-label">Half Size</div>
                            </div>
                            <div class="size-preset" data-percentage="75">
                                <div class="size-value">75%</div>
                                <div class="size-label">Slightly Smaller</div>
                            </div>
                            <div class="size-preset" data-percentage="100">
                                <div class="size-value">100%</div>
                                <div class="size-label">Original</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Slider -->
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label" style="display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-sliders-h"></i> Fine-Tune Percentage
                            </span>
                            <span class="slider-value" id="percentageValue">25%</span>
                        </div>
                        <input type="range" class="slider" id="percentageSlider" min="1" max="100" value="25" step="1">
                        <div class="slider-labels">
                            <span>1%</span>
                            <span>100%</span>
                        </div>
                    </div>
                </div>

                <!-- DPI Method -->
                <div class="tab-content" id="dpi-content">
                    <h3 class="method-title"><i class="fas fa-expand"></i> Resize with DPI</h3>
                    
                    <div class="input-group">
                        <label class="input-label">Target DPI (Dots Per Inch)</label>
                        <div class="dpi-grid">
                            <div class="dpi-preset active" data-dpi="72">
                                <div class="dpi-value">72</div>
                                <div class="dpi-label">Web Standard</div>
                            </div>
                            <div class="dpi-preset" data-dpi="150">
                                <div class="dpi-value">150</div>
                                <div class="dpi-label">Good Print</div>
                            </div>
                            <div class="dpi-preset" data-dpi="300">
                                <div class="dpi-value">300</div>
                                <div class="dpi-label">High Quality</div>
                            </div>
                            <div class="dpi-preset" data-dpi="600">
                                <div class="dpi-value">600</div>
                                <div class="dpi-label">Professional</div>
                            </div>
                        </div>
                        <div class="slider-container">
                            <div class="slider-header">
                                <span class="slider-label">DPI Value</span>
                                <span class="slider-value" id="dpiValue">150</span>
                            </div>
                            <input type="range" class="slider" id="dpiSlider" min="72" max="600" value="150" step="1">
                            <div class="slider-labels">
                                <span>72 DPI</span>
                                <span>600 DPI</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons" id="actionButtons">
                    <!-- Row 1: Compress + Preview (side by side) -->
                    <div class="top-row">
                        <button class="action-btn secondary" id="compressBtn" disabled>
                            <i class="fas fa-compress-alt"></i> Compress
                        </button>
                        
                        <button class="action-btn secondary" id="previewBtn" disabled>
                            <i class="fas fa-eye"></i> Preview Selected
                        </button>
                    </div>
                    
                    <!-- Row 2: Download Selected (full width) -->
                    <button class="action-btn" id="downloadSelectedBtn" disabled>
                        <i class="fas fa-download"></i> Select & Download
                    </button>
                    
                    <!-- Row 3: Download All (full width) -->
                    <button class="action-btn" id="downloadAllBtn" disabled>
                        <i class="fas fa-file-archive"></i> Download All Images
                    </button>
                </div>
                
                <!-- Progress Container -->
                <div class="progress-container" id="progressContainer">
                    <div class="progress-header">
                        <span style="color: #1d4ed8; font-weight: 600;">Processing...</span>
                        <span id="progressText" style="color: #2563eb; font-weight: 600;">0% (0/0)</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>

                <!-- Results Container -->
                <div class="results-container" id="resultsContainer">
                    <div class="results-header">
                        <i class="fas fa-check-circle"></i>
                        <span>Processing Complete!</span>
                    </div>
                    <div class="results-stats">
                        <div class="stat-card">
                            <div class="stat-label">Processed</div>
                            <div class="stat-value" id="processedCount">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Size Saved</div>
                            <div class="stat-value success" id="totalSavings">0%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Quality</div>
                            <div class="stat-value" id="averageQuality">Excellent</div>
                        </div>
                    </div>
                    <p style="font-size: 0.85rem; color: #6b7280; line-height: 1.4;">
                        Images optimized successfully. Ready for use.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
   <!-- Related Tools Section -->
<section class="related-tools-section lazy-section">
    <div class="related-tools-card">
        <h3 class="related-tools-title">Need More Image Tools?</h3>
        <p class="related-tools-description">Check out our Metadata Remover or Image Converter to optimize and manage your images efficiently.</p>

        <a href="metadata-remover.html" class="related-tools-button">
            <i class="fas fa-trash-alt"></i> Try Metadata Remover
        </a>

        <p style="font-weight: bold; margin: 0;">or</p>

        <div class="connected-tools">
            <a href="image-converter.html" class="connected-tool-link">Image Converter</a>
        </div>
    </div>
</section>

   <!-- Features Section -->
<section class="features-section lazy-section">
    <h2 class="section-title">Key Features</h2>
    <div class="features-grid">
        
        <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-bolt"></i></div>
            <h3 class="feature-title">Instant Processing</h3>
            <p>Compress images instantly in real time with zero upload delay and fast browser-based processing.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-images"></i></div>
            <h3 class="feature-title">Batch Image Optimization</h3>
            <p>Upload and compress multiple images at once, then download all optimized files as a single ZIP.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-shield-alt"></i></div>
            <h3 class="feature-title">100% Local & Private</h3>
            <p>All image optimization happens locally in your browser. Your images are never uploaded or stored.</p>
        </div>
    </div>
</section>


    <!-- How to Use Section -->
<section class="how-to-section lazy-section">
    <h2 class="section-title">How to Use</h2>
    <div class="steps">
        <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
                <h3>Upload Your Images</h3>
                <p>Select or drag and drop JPG, PNG, or WebP files into the image compressor. You can add single images or use batch image compression.</p>
            </div>
        </div>
        <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
                <h3>Choose Compression Settings</h3>
                <p>Adjust compression level, resize images, or target a specific file size to reduce image size without losing quality.</p>
            </div>
        </div>
        <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
                <h3>Preview Optimized Images</h3>
                <p>Instantly compare original and compressed images to ensure visual quality is preserved after image optimization.</p>
            </div>
        </div>
        <div class="step">
            <div class="step-number">4</div>
            <div class="step-content">
                <h3>Download Results</h3>
                <p>Download optimized images individually or as a ZIP file. Perfect for websites, SEO image optimization, and faster loading pages.</p>
            </div>
        </div>
    </div>
</section>

 <!-- ARTICLE SECTION -->
<section class="article-section lazy-section">
    <div class="article-header">
        <div class="article-badge">
            <i class="fas fa-image"></i> Master Image Compression
        </div>
        <h2 class="article-title">Complete Guide to Image Compression & Optimization</h2>
        <p class="article-subtitle">Shrink images, maintain quality, and boost website performance</p>
    </div>

    <div class="article-single-content">
        <!-- VISIBLE CONTENT -->
        <div class="visible-content">
            <div class="article-intro">
                <p><strong>High-quality images are essential for engaging websites, blogs, and social media.</strong> But large image files slow down your site and hurt SEO. Toolivo Image Compressor helps you compress images online, reduce file size, and optimize visuals for faster loading and better performance across all platforms. Supported formats include WebP, JPEG, PNG, and GIF, allowing you to optimize any image efficiently.</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">100%</div>
                    <div class="stat-label">Local Compression</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">0ms</div>
                    <div class="stat-label">Upload Delay</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Instant</div>
                    <div class="stat-label">Processing Speed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">∞</div>
                    <div class="stat-label">Max Image Size</div>
                </div>
            </div>

            <div class="content-section">
                <div class="section-header">
                    <i class="fas fa-compress-arrows-alt section-icon"></i>
                    <h3 class="section-title-sm">Compression Methods & Techniques</h3>
                </div>
                <div class="section-content">
                    <p><strong>Image compression is more than just reducing file size.</strong> Toolivo supports <strong>lossless compression</strong> to preserve original quality and <strong>lossy compression</strong> to achieve smaller file sizes with minor quality trade-offs. Choose the best approach for each image to balance performance and visual appeal.</p>

                    <div class="article-image-compact">
                <img 
                    src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiQ4DLNf7_4uOPL2eVIDmIkWM1Fa__KGczW1Y2Uamf1k9iS8prbtHAVrs4vU97RPaC5zLszVlZaQIg9GQ2pHDxD_WAMNbA76nww1gV5sU_CnLvlE-_5l1Og2ZEM7J9hkq9__uUYbITjHZHLVRM2LB7c8c8N-zv7ii04s4bLUc8T1aTKTA/s1600/text-analyzer-banner.webp" 
                    alt="Text Analysis Dashboard with Multiple Metrics" 
                    loading="lazy"
                >
            </div>

                    <p><strong>Real-time preview</strong> shows compressed image size instantly, letting you adjust quality settings for web, social media, or email campaigns. Optimized images reduce bandwidth, improve page speed, and enhance user experience.</p>

                    <div class="platform-cards">
                        <div class="platform-card">
                            <div class="platform-name">Websites</div>
                            <div class="platform-limit">Optimal under 200 KB per image</div>
                        </div>
                        <div class="platform-card">
                            <div class="platform-name">Social Media</div>
                            <div class="platform-limit">Compressed for fast loading</div>
                        </div>
                        <div class="platform-card">
                            <div class="platform-name">Email Campaigns</div>
                            <div class="platform-limit">Under 100 KB recommended</div>
                        </div>
                        <div class="platform-card">
                            <div class="platform-name">Mobile Apps</div>
                            <div class="platform-limit">Optimized for all devices</div>
                        </div>
                    </div>

                    <p><strong>Advanced image analysis</strong> evaluates dimensions, format, transparency, and color depth to ensure each image displays correctly across devices while keeping file size minimal.</p>
                </div>
            </div>

            <div class="content-section">
                <div class="section-header">
                    <i class="fas fa-layer-group section-icon"></i>
                    <h3 class="section-title-sm">Batch Compression & SEO Advantages</h3>
                </div>
                <div class="section-content">
                    <p><strong>Save time with batch image compression.</strong> Compress multiple images simultaneously for consistent quality, faster website loading, and better SEO performance.</p>

                    <div class="tips-box">
                        <div class="tips-header">
                            <i class="fas fa-lightbulb"></i>
                            <span>Recommended File Sizes</span>
                        </div>
                        <ul class="tips-list">
                            <li><strong>Website Banners:</strong> 150-300 KB for quick loading</li>
                            <li><strong>Blog & Article Images:</strong> 100-200 KB for SEO optimization</li>
                            <li><strong>Social Media Posts:</strong> 50-150 KB for clarity and speed</li>
                            <li><strong>Email Attachments:</strong> 50 KB max for compatibility</li>
                        </ul>
                    </div>

                    <p><strong>SEO-friendly image optimization</strong> enhances Core Web Vitals like Largest Contentful Paint (LCP), helping your pages rank higher while maintaining high-quality visuals.</p>
                </div>
            </div>
        </div>

        <!-- READ MORE BUTTON -->
        <button class="see-more-btn" id="see-more-btn">
            Read More <i class="fas fa-chevron-down"></i>
        </button>

        <!-- HIDDEN CONTENT -->
        <div class="see-more-content" id="see-more-content" hidden>
            <div class="content-section">
                <div class="section-header">
                    <i class="fas fa-file-image section-icon"></i>
                    <h3 class="section-title-sm">Format Conversion & Quality Control</h3>
                </div>
                <div class="section-content">
                    <p><strong>Convert images to WebP, JPEG, PNG, or GIF.</strong> WebP is ideal for web use due to smaller size with high quality. Toolivo allows you to preview conversion results before saving.</p>
                    
                    <p><strong>Adjust quality precisely</strong> using the slider to maintain sharp visuals across devices.</p>

                    <div class="tips-box">
                        <div class="tips-header">
                            <i class="fas fa-rocket"></i>
                            <span>Pro Tips</span>
                        </div>
                        <ul class="tips-list">
                            <li><strong>High-resolution photos:</strong> 80-90% compression to preserve clarity</li>
                            <li><strong>Graphics & Icons:</strong> Use lossless compression for crisp edges</li>
                            <li><strong>Animated GIFs:</strong> Optimize frame size and color palette</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="content-section">
                <div class="section-header">
                    <i class="fas fa-shield-alt section-icon"></i>
                    <h3 class="section-title-sm">Privacy & Local Processing</h3>
                </div>
                <div class="section-content">
                    <p><strong>All compression happens locally in your browser.</strong> Images never leave your device, keeping personal photos, business graphics, and client assets private.</p>

                    <p><strong>High-speed local processing</strong> ensures instant compression for single or batch uploads without server delays.</p>
                </div>
            </div>

            <div class="content-section">
                <div class="section-header">
                    <i class="fas fa-tools section-icon"></i>
                    <h3 class="section-title-sm">Advanced Optimization Features</h3>
                </div>
                <div class="section-content">
                    <h4 class="content-subheading">Responsive Image Resizing</h4>
                    <p><strong>Automatically resize images</strong> for desktop, tablet, and mobile, ensuring fast loading and perfect display on every device.</p>

                    <div class="article-image-compact">
                        <img 
                            src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEit0RLGymRlDwVeoR9jl2lhCVaYF5kO3MyQC2RqdeXkh66_CLRIK3f5kgAshbk5Umf1_uL3W9jOpCVE4acS1n4UCIUts1IP9DiKfz7PlXnYv7ZSAFY-2-ipv9abo2BSL71_2FtOfjrLPCQnOqILPeMJixANLWPaUkfhdS-GWEnj51sJ9g/s1600/1765037395893-019af46c-5269-7c5d-904a-122d3a203724.webp" 
                            alt="Advanced Text Analytics Dashboard" 
                            loading="lazy"
                        >
                    </div>

                    <h4 class="content-subheading">Compression Analysis & Reporting</h4>
                    <p><strong>Review compression results</strong> including original vs compressed size, format, and quality before saving or downloading.</p>

                    <div class="tips-box">
                        <div class="tips-header">
                            <i class="fas fa-chart-pie"></i>
                            <span>Optimization Guidelines</span>
                        </div>
                        <ul class="tips-list">
                            <li><strong>Website Galleries:</strong> 100-200 KB per image</li>
                            <li><strong>App Thumbnails:</strong> 20-50 KB for faster load</li>
                            <li><strong>Email Marketing:</strong> Under 100 KB for attachments</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="content-section">
                <div class="section-header">
                    <i class="fas fa-mobile-alt section-icon"></i>
                    <h3 class="section-title-sm">Platform-Specific Image Optimization</h3>
                </div>
                <div class="section-content">
                    <div class="platform-cards">
                        <div class="platform-card">
                            <div class="platform-name">Website</div>
                            <div class="platform-details">Fast-loading, SEO-friendly images</div>
                        </div>
                        <div class="platform-card">
                            <div class="platform-name">Social Media</div>
                            <div class="platform-details">Optimized resolution, mobile-ready</div>
                        </div>
                        <div class="platform-card">
                            <div class="platform-name">Email Campaigns</div>
                            <div class="platform-details">Small file size, fast download</div>
                        </div>
                        <div class="platform-card">
                            <div class="platform-name">App Assets</div>
                            <div class="platform-details">High-quality, low-size thumbnails</div>
                        </div>
                    </div>

                    <h4 class="content-subheading">Best Practices</h4>
                    <p><strong>Resize before upload</strong> and compress graphics for clarity. Avoid oversized images to maintain speed and SEO benefits.</p>
                </div>
            </div>

            <div class="content-section">
                <div class="section-header">
                    <i class="fas fa-cogs section-icon"></i>
                    <h3 class="section-title-sm">Integrated Compression Workflow</h3>
                </div>
                <div class="section-content">
                    <p><strong>Streamline your image management:</strong></p>
                    <ol>
                        <li><strong>Upload Images:</strong> Drag-and-drop or select multiple files</li>
                        <li><strong>Choose Compression Options:</strong> Lossless, lossy, or format conversion</li>
                        <li><strong>Preview Results:</strong> Confirm quality and size before saving</li>
                        <li><strong>Batch Download:</strong> Save all images in a ZIP file</li>
                        <li><strong>Apply Across Platforms:</strong> Websites, social media, emails, and apps</li>
                    </ol>

                    <p><strong>This workflow</strong> saves time, ensures consistency, and guarantees fast-loading, SEO-optimized images for all projects.</p>
                </div>
            </div>

            <div class="content-section">
                <div class="section-header">
                    <i class="fas fa-chart-line section-icon"></i>
                    <h3 class="section-title-sm">The Future of Image Compression</h3>
                </div>
                <div class="section-content">
                    <p><strong>Next-gen image optimization is evolving:</strong> AI-based compression, responsive resizing, and modern formats like AVIF are shaping faster, more efficient image delivery.</p>

                    <div class="tips-box">
                        <div class="tips-header">
                            <i class="fas fa-eye"></i>
                            <span>Key Takeaways</span>
                        </div>
                        <ul class="tips-list">
                            <li><strong>Prioritize Speed:</strong> Smaller images improve UX and SEO</li>
                            <li><strong>Preserve Quality:</strong> Maintain visual appeal while compressing</li>
                            <li><strong>Optimize for All Devices:</strong> Desktop, tablet, and mobile</li>
                            <li><strong>Analyze Impact:</strong> Track load time and engagement improvements</li>
                        </ul>
                    </div>

                    <div class="final-insight">
                        <strong>Final Insight:</strong> Toolivo Image Compressor ensures your visuals are fast, high-quality, and SEO-friendly—helping your website perform at its best.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="faq-section lazy-section">
    <h2 class="section-title">Frequently Asked Questions</h2>
    <div class="faq-list">
        <!-- First 3 visible by default -->
        <div class="faq-group" id="faq-initial">
            <div class="faq-item" tabindex="0">
                <div class="faq-question">
                    <span>Are my images uploaded or stored anywhere?</span>
                    <span class="faq-icon"><i class="fas fa-plus"></i></span>
                </div>
                <div class="faq-answer">
                    <p>No. All image compression happens locally in your browser. Your images are never uploaded, stored, or shared, making this a fully private image compressor.</p>
                </div>
            </div>

            <div class="faq-item" tabindex="0">
                <div class="faq-question">
                    <span>Can I compress images without losing quality?</span>
                    <span class="faq-icon"><i class="fas fa-plus"></i></span>
                </div>
                <div class="faq-answer">
                    <p>Yes. Toolivo supports lossless image compression to reduce image size without visible quality loss. You can also choose lossy compression for higher size reduction when needed.</p>
                </div>
            </div>

            <div class="faq-item" tabindex="0">
                <div class="faq-question">
                    <span>Which image formats are supported?</span>
                    <span class="faq-icon"><i class="fas fa-plus"></i></span>
                </div>
                <div class="faq-answer">
                    <p>You can compress JPEG, PNG, WebP, and GIF images. This makes it suitable as a JPG compressor, PNG image size reducer, and WebP compressor online.</p>
                </div>
            </div>
        </div>

        <!-- Hidden extra FAQs -->
        <div class="faq-group" id="faq-extra" hidden>
            <div class="faq-item" tabindex="0">
                <div class="faq-question">
                    <span>Is there a limit on image size or file count?</span>
                    <span class="faq-icon"><i class="fas fa-plus"></i></span>
                </div>
                <div class="faq-answer">
                    <p>No hard limits are applied. You can compress large images and use the batch image compressor to process multiple files at once. Performance depends on your device.</p>
                </div>
            </div>

            <div class="faq-item" tabindex="0">
                <div class="faq-question">
                    <span>Can I compress multiple images at the same time?</span>
                    <span class="faq-icon"><i class="fas fa-plus"></i></span>
                </div>
                <div class="faq-answer">
                    <p>Yes. Toolivo works as a batch image compressor free tool, allowing you to compress multiple images fast and download them individually or as a ZIP file.</p>
                </div>
            </div>

            <div class="faq-item" tabindex="0">
                <div class="faq-question">
                    <span>Can I target a specific file size like 100KB?</span>
                    <span class="faq-icon"><i class="fas fa-plus"></i></span>
                </div>
                <div class="faq-answer">
                    <p>Yes. You can adjust compression settings to reduce image size for web use, including compressing JPG to 100KB online depending on the original image quality.</p>
                </div>
            </div>

            <div class="faq-item" tabindex="0">
                <div class="faq-question">
                    <span>Is this image compressor free to use?</span>
                    <span class="faq-icon"><i class="fas fa-plus"></i></span>
                </div>
                <div class="faq-answer">
                    <p>Yes. This is a free online image compressor with no registration, no watermark, and no usage limits.</p>
                </div>
            </div>

            <div class="faq-item" tabindex="0">
                <div class="faq-question">
                    <span>Does image compression help SEO?</span>
                    <span class="faq-icon"><i class="fas fa-plus"></i></span>
                </div>
                <div class="faq-answer">
                    <p>Absolutely. Image compression for SEO improves page speed, Core Web Vitals, and user experience, which can positively impact search engine rankings.</p>
                </div>
            </div>

            <div class="faq-item" tabindex="0">
                <div class="faq-question">
                    <span>Can I use this tool on mobile devices?</span>
                    <span class="faq-icon"><i class="fas fa-plus"></i></span>
                </div>
                <div class="faq-answer">
                    <p>Yes. Toolivo Image Compressor is fully responsive and works smoothly on mobile phones, tablets, and desktop browsers.</p>
                </div>
            </div>

            <div class="faq-item" tabindex="0">
                <div class="faq-question">
                    <span>Do I need an account or email to use it?</span>
                    <span class="faq-icon"><i class="fas fa-plus"></i></span>
                </div>
                <div class="faq-answer">
                    <p>No account is required. You can start compressing images instantly without sign-up, login, or email verification.</p>
                </div>
            </div>
        </div>

        <!-- See More Button -->
        <button class="see-more-btn" id="faq-see-more">
            See more FAQs <i class="fas fa-chevron-down"></i>
        </button>
    </div>
</section>

<!-- Troubleshooting Section -->
<section class="troubleshooting-section lazy-section">
    <h2 class="section-title">Troubleshooting</h2>
    <div class="troubleshooting-grid">
        <div class="troubleshooting-card">
            <h3><i class="fas fa-exclamation-triangle"></i> Compressed size is not small enough</h3>
            <p>Try adjusting the compression level or switching between lossless and lossy compression. Image size reduction depends on the original image quality and format.</p>
        </div>

        <div class="troubleshooting-card">
            <h3><i class="fas fa-tachometer-alt"></i> Image compression feels slow</h3>
            <p>Compressing large images or using batch image compression may take longer on low-end devices. Since everything runs locally, performance depends on your device.</p>
        </div>

        <div class="troubleshooting-card">
            <h3><i class="fas fa-download"></i> Download not starting</h3>
            <p>If the download button does not respond, check your browser settings or disable download blockers. Make sure JavaScript is enabled and the page is loaded fully.</p>
        </div>
    </div>
</section>

<!-- About Section -->
<section class="about-section lazy-section">
    <h2 class="section-title">About Image Compressor</h2>
    <div class="about-content">
        <p>Image Compressor is a free online image compressor built to help website owners, designers, and everyday users reduce image size without losing quality. It supports fast image compression for JPEG, PNG, and WebP formats.</p>
        <p>You can use this tool to compress images online, optimize photos for the web, or prepare visuals for blogs, ecommerce stores, and social media. It works as a lossless image compressor or a quick image size reducer depending on your settings.</p>
        <p>All image processing happens directly in your browser. No uploads, no servers, and no tracking. This makes it a secure image optimizer tool for batch image compression, SEO image optimization, and everyday use.</p>
    </div>
</section>

    <!-- Share with Friends Section -->
    <section class="social-sharing">
        <h3>Share Toolivo Text Analyzer with your friends</h3>
        <div class="social-icons" id="socialIcons">
            <!-- Social icons will be dynamically loaded -->
        </div>
    </section>

    <!-- Footer -->
    <footer class="comprehensive-footer">
        <div class="footer-grid">
            <div class="footer-section">
                <h4>Legal</h4>
                <ul class="footer-links">
                    <li><a href="terms-conditions.html">Terms & Conditions</a></li>
                    <li><a href="privacy-policy.html">Privacy Policy</a></li>
                    <li><a href="disclaimer.html">Disclaimer</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Company</h4>
                <ul class="footer-links">
                    <li><a href="about-us.html">About Us</a></li>
                    <li><a href="contact-us.html">Contact Us</a></li>
                    <li><a href="features.html">Features</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Support</h4>
                <ul class="footer-links">
                    <li><a href="help-center.html">Help Center</a></li>
                    <li><a href="faqs.html">FAQ</a></li>
                    <li><a href="request-a-tool.html">Request a Tool</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Connect</h4>
                <ul class="footer-links">
                    <li><a href="https://toolivo.github.io/blogs/">Blog</a></li>
                    <li><a href="updates.html">Updates</a></li>
                    <li><a href="community.html">Community</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p>Toolivo &copy; 2026 — All rights reserved</p>
            <p class="creator-credit">Created with ❤️ by Mushfikur Riad</p>
        </div>
    </footer>
    <!-- Back-to-top button -->
<button id="backToTop" class="back-to-top" aria-label="Back to top">
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M12 19V5M5 12l7-7 7 7"/>
  </svg>
</button>
<script>
    // === Menu Functionality ===
    const menuToggle = document.getElementById('menuToggle');
    const menuCard = document.getElementById('menuCard');
    const menuClose = document.getElementById('menuClose');
    const backdrop = document.getElementById('backdrop');

    function openMenu() {
        menuCard.classList.add('open');
        backdrop.classList.add('visible');
        menuToggle.classList.add('open');
        document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
        menuCard.classList.remove('open');
        backdrop.classList.remove('visible');
        menuToggle.classList.remove('open');
        document.body.style.overflow = '';
    }

    menuToggle.addEventListener('click', () => {
        menuCard.classList.contains('open') ? closeMenu() : openMenu();
    });

    menuClose.addEventListener('click', closeMenu);
    backdrop.addEventListener('click', closeMenu);

    // === Animated Theme Toggle Functionality ===
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;

    // Check for saved theme or system preference
    const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const savedTheme = localStorage.getItem('theme');
    const isDark = savedTheme === 'dark' || (!savedTheme && systemPrefersDark);

    async function toggleTheme() {
        if (!document.startViewTransition) {
            // Fallback for browsers without View Transitions API
            const newTheme = !body.classList.contains('dark-mode');
            applyTheme(newTheme);
            return;
        }

        await document.startViewTransition(() => {
            const newTheme = !body.classList.contains('dark-mode');
            body.classList.toggle('dark-mode', newTheme);
            localStorage.setItem('theme', newTheme ? 'dark' : 'light');
        }).ready;

        // Create circular animation
        const { top, left, width, height } = themeToggle.getBoundingClientRect();
        const x = left + width / 2;
        const y = top + height / 2;
        const maxRadius = Math.hypot(
            Math.max(left, window.innerWidth - left),
            Math.max(top, window.innerHeight - top)
        );

        document.documentElement.animate(
            {
                clipPath: [
                    `circle(0px at ${x}px ${y}px)`,
                    `circle(${maxRadius}px at ${x}px ${y}px)`,
                ],
            },
            {
                duration: 400,
                easing: 'ease-in-out',
                pseudoElement: '::view-transition-new(root)',
            }
        );
    }

    function applyTheme(isDarkMode) {
        body.classList.toggle('dark-mode', isDarkMode);
        localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
    }

    // Apply theme on page load
    applyTheme(isDark);

    // Toggle theme on button click
    themeToggle.addEventListener('click', toggleTheme);

    // === Social Icons Functionality ===
    const socialIconsContainer = document.getElementById('socialIcons');
    
    // Social icons data
    const socialIconsData = [
        { 
            name: 'x-twitter', 
            label: 'Share on X',
            svg: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
            </svg>`
        },
        { 
            name: 'linkedin', 
            label: 'Share on LinkedIn',
            svg: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
                <rect x="2" y="9" width="4" height="12"/>
                <circle cx="4" cy="4" r="2"/>
            </svg>`
        },
        { 
            name: 'facebook', 
            label: 'Share on Facebook',
            svg: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
            </svg>`
        },
        { 
            name: 'whatsapp', 
            label: 'Share on WhatsApp',
            svg: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893 0-3.189-1.248-6.189-3.515-8.444"/>
            </svg>`
        },
        { 
            name: 'telegram', 
            label: 'Share on Telegram',
            svg: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.447 1.394c-.14.141-.259.259-.374.261l.213-3.053 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.136-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
            </svg>`
        },
        { 
            name: 'instagram', 
            label: 'Share on Instagram',
            svg: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M7 2C4.24 2 2 4.24 2 7v10c0 2.76 2.24 5 5 5h10c2.76 0 5-2.24 5-5V7c0-2.76-2.24-5-5-5H7zm10 2c1.65 0 3 1.35 3 3v10c0 1.65-1.35 3-3 3H7c-1.65 0-3-1.35-3-3V7c0-1.65 1.35-3 3-3h10zm-5 3.5A4.5 4.5 0 1 0 16.5 12 4.5 4.5 0 0 0 12 7.5zm0 7A2.5 2.5 0 1 1 14.5 12 2.5 2.5 0 0 1 12 14.5zm4.75-8.75a1.25 1.25 0 1 1-1.25 1.25 1.25 1.25 0 0 1 1.25-1.25z"/>
            </svg>`
        },
        { 
            name: 'reddit', 
            label: 'Share on Reddit',
            svg: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
            </svg>`
        },
        { 
            name: 'pinterest', 
            label: 'Share on Pinterest',
            svg: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0C5.373 0 0 5.372 0 12c0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738a.36.36 0 0 1 .083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.631-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24 12 24c6.627 0 12-5.373 12-12 0-6.628-5.373-12-12-12z"/>
            </svg>`
        },
        {
            name: 'messenger',
            label: 'Share on Messenger',
            svg: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.49 2 2 6.2 2 11.15c0 2.92 1.6 5.55 4.07 7.34V22l3.68-2.02c.99.28 2.07.43 3.25.43 5.51 0 10-4.2 10-9.26C23 6.2 17.51 2 12 2zm4.9 7.6-3.3 3.5-2.1-2.3-4.5 2.3 4.7-4.9 2.1 2.3 3.1-1.9z"/>
            </svg>`
        },
        { 
            name: 'email', 
            label: 'Share via Email',
            svg: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
            </svg>`
        }
    ];

    // Function to load social icons
    function loadSocialIcons() {
        socialIconsData.forEach(icon => {
            const socialIcon = document.createElement('a');
            socialIcon.href = '#';
            socialIcon.className = `social-icon ${icon.name}`;
            socialIcon.setAttribute('aria-label', icon.label);
            socialIcon.innerHTML = icon.svg;
            
            socialIconsContainer.appendChild(socialIcon);
        });
        
        // Add event listeners to social icons after they're loaded
        addSocialIconEventListeners();
    }
    
    // Load social icons immediately when page loads
    document.addEventListener('DOMContentLoaded', function() {
        loadSocialIcons();
    });

    // Social Media Sharing Functionality with Click Effects
    function addSocialIconEventListeners() {
        const socialIcons = document.querySelectorAll('.social-icon');
        
        socialIcons.forEach(icon => {
            icon.addEventListener('click', (e) => {
                e.preventDefault();
                
                // Add click animation
                icon.classList.add('clicked');
                setTimeout(() => {
                    icon.classList.remove('clicked');
                }, 400);
                
                const currentUrl = encodeURIComponent(window.location.href);
                const title = encodeURIComponent(document.title);
                const description = encodeURIComponent("Analyze text instantly with Toolivo Text Analyzer. Get accurate counts, readability metrics and detailed insights in one place.");
                
                let shareUrl = '';
                
                if (icon.classList.contains('x-twitter')) {
                    shareUrl = `https://twitter.com/intent/tweet?text=${title}&url=${currentUrl}`;
                } else if (icon.classList.contains('linkedin')) {
                    shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${currentUrl}`;
                } else if (icon.classList.contains('facebook')) {
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${currentUrl}`;
                } else if (icon.classList.contains('whatsapp')) {
                    shareUrl = `https://api.whatsapp.com/send?text=${title}%20${currentUrl}`;
                } else if (icon.classList.contains('telegram')) {
                    shareUrl = `https://t.me/share/url?url=${currentUrl}&text=${title}`;
                } else if (icon.classList.contains('instagram')) {
                    // Instagram doesn't support direct sharing, open profile
                    shareUrl = `https://www.instagram.com/`;
                } else if (icon.classList.contains('reddit')) {
                    shareUrl = `https://reddit.com/submit?url=${currentUrl}&title=${title}`;
                } else if (icon.classList.contains('pinterest')) {
                    shareUrl = `https://pinterest.com/pin/create/button/?url=${currentUrl}&description=${title}`;
                } else if (icon.classList.contains('messenger')) {
                    shareUrl = `https://www.facebook.com/dialog/send?link=${currentUrl}&app_id=YOUR_APP_ID&redirect_uri=${currentUrl}`;
                } else if (icon.classList.contains('email')) {
                    shareUrl = `mailto:?subject=${title}&body=${description}%20${currentUrl}`;
                }
                
                if (shareUrl) {
                    if (icon.classList.contains('email')) {
                        // For email, don't open in new window
                        window.location.href = shareUrl;
                    } else {
                        window.open(shareUrl, '_blank', 'width=600,height=400');
                    }
                }
            });
        });
    }

    // Enhanced FAQ toggle with smooth animation, grouped visibility, and outside-click close
    function initFAQs() {
        const allFAQItems = document.querySelectorAll('.faq-item');
        allFAQItems.forEach(item => {
            const question = item.querySelector('.faq-question');
            if (!question.dataset.initialized) {
                question.addEventListener('click', (e) => {
                    e.stopPropagation(); // Prevent triggering outside-click handler
                    const isActive = item.classList.contains('active');
                    // Close all others
                    allFAQItems.forEach(other => {
                        if (other !== item) {
                            other.classList.remove('active');
                        }
                    });
                    // Toggle current
                    item.classList.toggle('active', !isActive);
                });
                question.dataset.initialized = 'true';
            }
            
            // Add keyboard support for FAQ items
            item.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    item.click();
                }
            });
        });
    }

    // Close all FAQs on outside click/tap
    function closeAllFAQs() {
        document.querySelectorAll('.faq-item').forEach(item => {
            item.classList.remove('active');
        });
    }

    // Global outside-click listener
    document.addEventListener('click', (e) => {
        const clickedInsideFAQ = e.target.closest('.faq-item');
        if (!clickedInsideFAQ) {
            closeAllFAQs();
        }
    });

    // Initialize first batch
    initFAQs();

    // Enhanced FAQ "See More" with smooth entry animation
    const seeMoreBtn = document.getElementById('faq-see-more');
    const extraFAQs = document.getElementById('faq-extra');

    if (seeMoreBtn && extraFAQs) {
        seeMoreBtn.addEventListener('click', () => {
            // 1. Reveal container with smooth opacity/transform
            extraFAQs.style.opacity = '0';
            extraFAQs.style.transform = 'translateY(10px)';
            extraFAQs.removeAttribute('hidden');
            
            // Trigger reflow
            void extraFAQs.offsetWidth;
            
            // 2. Animate container in
            extraFAQs.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
            extraFAQs.style.opacity = '1';
            extraFAQs.style.transform = 'translateY(0)';

            // 3. Fade out & remove button smoothly
            seeMoreBtn.style.opacity = '0';
            seeMoreBtn.style.transform = 'scale(0.95)';
            setTimeout(() => {
                seeMoreBtn.style.display = 'none';
            }, 300);

            // 4. Initialize new FAQs
            setTimeout(() => {
                initFAQs();
                
                // 5. Animate each newly revealed FAQ item
                const newItems = extraFAQs.querySelectorAll('.faq-item');
                newItems.forEach((item, i) => {
                    item.style.opacity = '0';
                    item.style.transform = 'translateY(10px)';
                    item.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
                    setTimeout(() => {
                        item.style.opacity = '1';
                        item.style.transform = 'translateY(0)';
                    }, i * 80);
                });
            }, 100);
        });
    }

    // Lazy loading implementation
    function lazyLoadSections() {
        const sections = document.querySelectorAll('.lazy-section');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });
        
        sections.forEach(section => {
            observer.observe(section);
        });
    }

    // Article "See More" functionality
    document.addEventListener('DOMContentLoaded', () => {
        const btn = document.getElementById('see-more-btn');
        const content = document.getElementById('see-more-content');

        if (btn && content) {
            btn.addEventListener('click', () => {
                // 1. Show the hidden content
                content.removeAttribute('hidden');
                
                // 2. Hide the button completely
                btn.style.display = 'none';
                
                // 3. Optional: smooth scroll to revealed content
                content.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start', 
                    inline: 'nearest' 
                });
                
                // 4. Optional: Add animation to content appearance
                setTimeout(() => {
                    content.style.opacity = '1';
                    content.style.transform = 'translateY(0)';
                }, 10);
            });
        }
    });

    // Back to top functionality
    const backToTopBtn = document.getElementById('backToTop');

    // Show/hide based on scroll
    window.addEventListener('scroll', () => {
        if (window.scrollY > 3000) {
            backToTopBtn.classList.add('show');
        } else {
            backToTopBtn.classList.remove('show');
        }
    });

    // Smooth scroll to top
    backToTopBtn.addEventListener('click', () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });

    // Theme toggle visibility on scroll
    document.addEventListener('DOMContentLoaded', () => {
        const themeToggle = document.getElementById('themeToggle');

        if (!themeToggle) {
            console.warn('⚠️ themeToggle not found. Skipping scroll visibility logic.');
            return;
        }

        // Initially hide (in case CSS didn't apply yet)
        themeToggle.classList.remove('visible');

        function updateThemeToggleVisibility() {
            if (window.scrollY > 40) {
                themeToggle.classList.add('visible');
            } else {
                themeToggle.classList.remove('visible');
            }
        }

        // Run on load & scroll
        window.addEventListener('scroll', updateThemeToggleVisibility, { passive: true });
        updateThemeToggleVisibility(); // in case page is reloaded mid-scroll
    });

    // Scroll down 10px on full page load — ensures layout is stable
    window.addEventListener('load', () => {
        // Small delay ensures header, menu, and layout have settled
        setTimeout(() => {
            // Only scroll if at absolute top (e.g. not mid-scroll on refresh)
            if (window.scrollY === 0) {
                window.scrollTo({
                    top: 45,
                    behavior: 'smooth'
                });
            }
        }, 10);
    });

    // Initialize lazy loading
    lazyLoadSections();

    // Function to scroll to tool section
    function scrollToToolSection() {
        const toolSection = document.getElementById('tool-section');
        if (toolSection) {
            toolSection.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }
    }

    // Fix image visibility and lazy loading
    function fixImageVisibility() {
        const images = document.querySelectorAll('.article-image-compact img');
        images.forEach(img => {
            // Ensure images are properly loaded
            if (!img.complete) {
                img.addEventListener('load', function() {
                    this.style.opacity = '1';
                });
                img.style.opacity = '0';
                img.style.transition = 'opacity 0.3s ease';
            }
            
            // Ensure proper image display
            img.style.display = 'block';
            img.style.width = '100%';
            img.style.height = 'auto';
        });
    }

    // Fix images on load
    document.addEventListener('DOMContentLoaded', fixImageVisibility);
    window.addEventListener('load', fixImageVisibility);


// ============ IMAGE COMPRESSOR EXACT JAVASCRIPT ============

document.addEventListener('DOMContentLoaded', function() {
    // Add JSZip library if not already loaded
    if (typeof JSZip === 'undefined') {
        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js';
        script.onload = initImageCompressor;
        document.head.appendChild(script);
    } else {
        initImageCompressor();
    }

    function initImageCompressor() {
        // Main Application State
        const state = {
            files: [],
            selectedFiles: new Set(),
            currentIndex: 0,
            isDragging: false,
            isEditingFilename: false,
            editingFilename: '',
            resizeMethod: 'quality',
            qualityLevel: 50,
            isProcessing: false,
            processedImages: [],
            smartCompressionSettings: {
                mode: 'perceptual',
                usage: 'web',
                balance: 50,
                faceDetection: true,
                textProtection: true,
                metadataRemoval: true
            },
            targetFileSizeKB: 500,
            targetFileSizeBytes: 500 * 1024,
            previewCache: new Map()
        };

        // DOM Elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const browseBtn = document.getElementById('browseBtn');
        const fileList = document.getElementById('fileList');
        const selectAllBtn = document.getElementById('selectAllBtn');
        const deselectAllBtn = document.getElementById('deselectAllBtn');
        const clearAllBtn = document.getElementById('clearAllBtn');
        const fileCountEl = document.querySelector('.file-count');
        
        // Main tabs
        const mainTabs = document.querySelectorAll('.tab-main');
        
        // Quality tab elements
        const qualitySliderTab = document.getElementById('qualitySliderTab');
        const qualityValueTab = document.getElementById('qualityValueTab');
        const compressionLevelText = document.getElementById('compressionLevelText');
        const compressionFill = document.getElementById('compressionFill');
        const compressionDescription = document.getElementById('compressionDescription');
        const qualityPresets = document.querySelectorAll('#quality-content .size-preset');
        
        // Smart Compression Elements
        const smartBalanceSlider = document.getElementById('smartBalanceSlider');
        const smartBalanceValue = document.getElementById('smartBalanceValue');
        const smartQualityFill = document.getElementById('smartQualityFill');
        const smartQualityText = document.getElementById('smartQualityText');
        const qualityDescription = document.getElementById('qualityDescription');
        const faceDetection = document.getElementById('faceDetection');
        const textProtection = document.getElementById('textProtection');
        const metadataRemoval = document.getElementById('metadataRemoval');
        const modeTabs = document.getElementById('modeTabs');
        const usageTabs = document.getElementById('usageTabs');
        const settingsToggle = document.getElementById('settingsToggle');
        const smartSettingsContent = document.getElementById('smartSettingsContent');
        const settingsIcon = document.getElementById('settingsIcon');
        
        // File Size elements
        const fileSizeSlider = document.getElementById('fileSizeSlider');
        const fileSizeValue = document.getElementById('fileSizeValue');
        const sizePresets = document.querySelectorAll('#file-size-content .size-preset');
        
        // Percentage elements
        const percentageSlider = document.getElementById('percentageSlider');
        const percentageValue = document.getElementById('percentageValue');
        const percentagePresets = document.querySelectorAll('#percentage-content .size-preset');
        
        // DPI elements
        const dpiSlider = document.getElementById('dpiSlider');
        const dpiValue = document.getElementById('dpiValue');
        const dpiPresets = document.querySelectorAll('.dpi-preset');
        
        // Action buttons
        const previewBtn = document.getElementById('previewBtn');
        const compressBtn = document.getElementById('compressBtn');
        const downloadSelectedBtn = document.getElementById('downloadSelectedBtn');
        const downloadAllBtn = document.getElementById('downloadAllBtn');
        
        // Progress and results elements
        const progressContainer = document.getElementById('progressContainer');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const resultsContainer = document.getElementById('resultsContainer');
        const processedCount = document.getElementById('processedCount');
        const totalSavings = document.getElementById('totalSavings');
        const averageQuality = document.getElementById('averageQuality');
        
        // Settings blur elements
        const settingsSection = document.getElementById('settingsSection');
        const settingsContentDiv = document.getElementById('settingsContent');
        const uploadPrompt = document.getElementById('uploadPrompt');

        // Utility Functions
        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function formatKB(kb) {
            return kb >= 1000 ? (kb / 1000).toFixed(1) + ' MB' : kb + ' KB';
        }

        function getFileExtension(filename) {
            return filename.slice((filename.lastIndexOf(".") - 1 >>> 0) + 2);
        }

        function getMimeTypeFromExtension(extension) {
            const mimeTypes = {
                'jpg': 'image/jpeg',
                'jpeg': 'image/jpeg',
                'png': 'image/png',
                'gif': 'image/gif',
                'webp': 'image/webp',
                'bmp': 'image/bmp',
                'svg': 'image/svg+xml',
                'tiff': 'image/tiff',
                'tif': 'image/tiff'
            };
            return mimeTypes[extension.toLowerCase()] || 'image/jpeg';
        }

        // Update blur state
        function updateBlurState() {
            const hasFiles = state.files.length > 0;
            
            if (settingsSection) {
                if (hasFiles) {
                    settingsSection.classList.remove('blurred-section');
                    if (settingsContentDiv) {
                        settingsContentDiv.style.pointerEvents = 'auto';
                        settingsContentDiv.style.opacity = '1';
                    }
                    if (uploadPrompt) uploadPrompt.style.display = 'none';
                } else {
                    settingsSection.classList.add('blurred-section');
                    if (settingsContentDiv) {
                        settingsContentDiv.style.pointerEvents = 'none';
                        settingsContentDiv.style.opacity = '0.4';
                    }
                    if (uploadPrompt) uploadPrompt.style.display = 'block';
                }
            }
        }

        // File list rendering
        function renderFileList() {
            if (state.files.length === 0) {
                fileList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-images"></i>
                        <p>No images uploaded yet</p>
                    </div>
                `;
                updateButtonStates();
                updateBlurState();
                updateFileCount();
                return;
            }
            
            fileList.innerHTML = state.files.map((file, index) => `
                <div class="file-item ${state.selectedFiles.has(index) ? 'selected' : ''}" data-index="${index}">
                    <div class="file-checkbox">
                        <i class="fas fa-check"></i>
                    </div>
                    <div class="file-icon">
                        <i class="fas fa-image"></i>
                    </div>
                    <div class="file-info">
                        <div class="file-name">${file.name}</div>
                        <div class="file-size">${formatBytes(file.size)}</div>
                    </div>
                    <div class="file-actions">
                        <button class="file-remove-btn" title="Remove file">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            `).join('');
            
            updateFileCount();
            updateButtonStates();
            updateBlurState();
        }

        function updateFileCount() {
            const count = state.files.length;
            const selectedCount = state.selectedFiles.size;
            if (fileCountEl) {
                fileCountEl.textContent = `${count} files`;
            }
        }

        function updateButtonStates() {
            const hasFiles = state.files.length > 0;
            const hasSelected = state.selectedFiles.size > 0;
            
            if (previewBtn) previewBtn.disabled = !hasSelected;
            if (compressBtn) compressBtn.disabled = !hasSelected;
            if (downloadSelectedBtn) downloadSelectedBtn.disabled = !hasFiles;
            if (downloadAllBtn) downloadAllBtn.disabled = !hasFiles;
        }

        function hideResultsContainer() {
            resultsContainer.classList.remove('active');
            progressContainer.classList.remove('active');
            document.getElementById('actionButtons').style.display = 'flex';
        }

        async function addFiles(newFiles) {
            const validFiles = [];
            
            for (const file of newFiles) {
                if (!state.files.some(f => f.name === file.name && f.size === file.size)) {
                    validFiles.push(file);
                }
            }
            
            if (validFiles.length === 0) return;
            
            // Hide results container when adding new files
            hideResultsContainer();
            
            validFiles.forEach(file => state.files.push(file));
            
            for (let i = state.files.length - validFiles.length; i < state.files.length; i++) {
                state.selectedFiles.add(i);
            }
            
            renderFileList();
            updateSmartCompressionDisplay();
            updateFileSizeSliderMax();
            
            // Auto-scroll to settings section
            if (validFiles.length > 0) {
                setTimeout(() => {
                    settingsSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 300);
            }
        }

        // File Management Functions
        function selectAllFiles() {
            state.files.forEach((_, index) => state.selectedFiles.add(index));
            renderFileList();
        }

        function deselectAllFiles() {
            state.selectedFiles.clear();
            renderFileList();
        }

        function clearAllFiles() {
            if (state.files.length === 0) return;
            
            // Hide results container when clearing files
            hideResultsContainer();
            
            state.files = [];
            state.selectedFiles.clear();
            state.currentIndex = 0;
            state.isEditingFilename = false;
            state.editingFilename = '';
            state.previewCache.clear();
            renderFileList();
            updateFileSizeSliderMax();
            
            // Update blur state
            updateBlurState();
        }

        // Quality Tab Functions
        function updateQualityDisplay() {
            const quality = parseInt(qualitySliderTab.value);
            
            qualityValueTab.textContent = `${quality}%`;
            qualitySliderTab.value = quality;
            
            qualityPresets.forEach(p => {
                p.classList.toggle('active', parseInt(p.dataset.quality) === quality);
            });
            
            compressionFill.style.width = `${quality}%`;
            
            if (quality >= 90) {
                compressionLevelText.textContent = 'Excellent';
                compressionDescription.textContent = 'Maximum quality with minimal compression';
            } else if (quality >= 75) {
                compressionLevelText.textContent = 'High';
                compressionDescription.textContent = 'High quality with light compression';
            } else if (quality >= 50) {
                compressionLevelText.textContent = 'Medium';
                compressionDescription.textContent = 'Good balance of quality and file size';
            } else if (quality >= 25) {
                compressionLevelText.textContent = 'Low';
                compressionDescription.textContent = 'Noticeable compression for smaller files';
            } else {
                compressionLevelText.textContent = 'Very Low';
                compressionDescription.textContent = 'Heavy compression, smallest file sizes';
            }
            
            state.qualityLevel = quality;
        }

        // Smart Compression Functions
        function updateSmartCompressionDisplay() {
            state.smartCompressionSettings.balance = parseInt(smartBalanceSlider.value);
            
            if (state.smartCompressionSettings.balance < 33) {
                smartBalanceValue.textContent = 'Small Size';
            } else if (state.smartCompressionSettings.balance < 66) {
                smartBalanceValue.textContent = 'Balanced';
            } else {
                smartBalanceValue.textContent = 'High Quality';
            }
            
            let qualityScore = state.smartCompressionSettings.balance / 100;
            if (state.smartCompressionSettings.mode === 'max-compression') qualityScore *= 0.7;
            else if (state.smartCompressionSettings.mode === 'lossless') qualityScore = 1;
            
            const qualityPercent = Math.round(qualityScore * 100);
            smartQualityFill.style.width = qualityPercent + '%';
            smartQualityText.textContent = qualityPercent + '%';
            
            const qualityText = qualityPercent >= 90 ? 'Excellent' : 
                               qualityPercent >= 75 ? 'Very Good' : 
                               qualityPercent >= 60 ? 'Good' : 'Fair';
            qualityDescription.textContent = `${qualityText} - Optimized for ${state.smartCompressionSettings.usage}`;
        }

        // Switch between main tabs
        function switchTab(tabName) {
            mainTabs.forEach(tab => {
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                if (content.id === `${tabName}-content`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            
            state.resizeMethod = tabName;
            
            if (tabName === 'quality') {
                updateQualityDisplay();
            }
        }

        // File Size Control Functions
        function setTargetFileSize(kb) {
            const displayText = formatKB(kb);
            fileSizeValue.textContent = displayText;
            fileSizeSlider.value = kb;
            
            sizePresets.forEach(p => {
                p.classList.toggle('active', parseInt(p.dataset.size) === kb);
            });
            
            state.targetFileSizeKB = kb;
            state.targetFileSizeBytes = kb * 1024;
        }

        function updateFileSizeSliderMax() {
            if (state.files.length === 0) {
                fileSizeSlider.max = 5000;
                return;
            }
            
            const maxKB = Math.ceil(
                Math.max(...state.files.map(f => f.size / 1024))
            );
            
            const sliderMax = Math.min(5000, maxKB);
            fileSizeSlider.max = sliderMax;
            
            if (state.targetFileSizeKB > sliderMax) {
                setTargetFileSize(sliderMax);
            }
        }

        // Percentage Control Functions
        function setPercentage(value) {
            value = Math.min(100, Math.max(1, parseInt(value) || 25));
            
            percentageValue.textContent = `${value}%`;
            percentageSlider.value = value;
            
            percentagePresets.forEach(p => {
                p.classList.toggle('active', parseInt(p.dataset.percentage) === value);
            });
        }

        // DPI Control Functions
        function setDPI(value) {
            dpiValue.textContent = value;
            dpiSlider.value = value;
            
            dpiPresets.forEach(p => {
                p.classList.toggle('active', parseInt(p.dataset.dpi) === value);
            });
        }

        // Image Compression Function
        async function compressImage(file, settings) {
            return new Promise((resolve) => {
                const img = new Image();
                const reader = new FileReader();
                reader.onload = (e) => {
                    img.src = e.target.result;
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        let scale = 1;
                        if (settings.mode === 'max-compression') scale = 0.7;
                        else if (settings.mode === 'perceptual') scale = 0.9;
                        
                        canvas.width = img.width * scale;
                        canvas.height = img.height * scale;
                        ctx.imageSmoothingQuality = 'high';
                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                        
                        let imageQuality = state.qualityLevel / 100;
                        if (settings.mode === 'max-compression') imageQuality *= 0.6;
                        else if (settings.mode === 'lossless') imageQuality = 0.95;
                        
                        // Preserve original format
                        const extension = getFileExtension(file.name);
                        const mimeType = getMimeTypeFromExtension(extension);
                        
                        canvas.toBlob((blob) => {
                            resolve({
                                original: file,
                                compressed: blob,
                                savings: ((file.size - blob.size) / file.size * 100).toFixed(1),
                                extension: extension,
                                mimeType: mimeType
                            });
                        }, mimeType, imageQuality);
                    };
                };
                reader.readAsDataURL(file);
            });
        }

        // Quality compression function
        async function compressImageByQuality(file) {
            return new Promise((resolve) => {
                const img = new Image();
                const reader = new FileReader();
                reader.onload = (e) => {
                    img.src = e.target.result;
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        canvas.width = img.width;
                        canvas.height = img.height;
                        ctx.imageSmoothingQuality = 'high';
                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                        
                        const quality = state.qualityLevel / 100;
                        
                        // Preserve original format
                        const extension = getFileExtension(file.name);
                        const mimeType = getMimeTypeFromExtension(extension);
                        
                        canvas.toBlob((blob) => {
                            resolve({
                                original: file,
                                compressed: blob,
                                savings: ((file.size - blob.size) / file.size * 100).toFixed(1),
                                extension: extension,
                                mimeType: mimeType
                            });
                        }, mimeType, quality);
                    };
                };
                reader.readAsDataURL(file);
            });
        }

        // File size resizing algorithm
        async function resizeImageToTargetSize(file, targetBytes) {
            const type = file.type;
            const isPNG = type === 'image/png';
            const isJPG = /jpe?g/.test(type);
            
            // Get original extension
            const extension = getFileExtension(file.name);
            const originalMimeType = getMimeTypeFromExtension(extension);

            const bitmap = await createBitmap(file).catch(() => null);
            if (!bitmap) {
                return { original: file, compressed: file, sizeError: 0, error: true, extension: extension };
            }

            let canvas = makeCanvas(bitmap.width, bitmap.height);
            let ctx = canvas.getContext('2d');
            let width = bitmap.width;
            let height = bitmap.height;

            function draw(w, h) {
                canvas.width = w;
                canvas.height = h;
                ctx.drawImage(bitmap, 0, 0, w, h);
            }

            const TOL = 5;
            const MAX = 12;

            if (isPNG) {
                let minScale = 0.25;
                let maxScale = 1.0;
                let best = null;
                let bestErr = Infinity;

                for (let i = 0; i < MAX; i++) {
                    const scale = (minScale + maxScale) / 2;
                    const w = Math.round(width * scale);
                    const h = Math.round(height * scale);

                    draw(w, h);
                    const blob = await canvasToBlob(canvas, originalMimeType);
                    if (!blob) break;

                    const err = Math.abs((blob.size - targetBytes) / targetBytes) * 100;
                    if (err < bestErr) {
                        best = blob;
                        bestErr = err;
                    }
                    if (err <= TOL) {
                        return { original: file, compressed: blob, sizeError: err.toFixed(1), extension: extension };
                    }
                    if (blob.size > targetBytes) maxScale = scale;
                    else minScale = scale;
                }

                return { original: file, compressed: best, sizeError: bestErr.toFixed(1), extension: extension };
            }

            let minQ = 0.12, maxQ = 0.95;
            let q = 0.85;

            let best = null;
            let bestErr = Infinity;
            let scale = 1.0;

            for (let i = 0; i < MAX; i++) {
                const w = Math.round(width * scale);
                const h = Math.round(height * scale);

                draw(w, h);

                // Use original format
                const blob = await canvasToBlob(canvas, originalMimeType, q);
                if (!blob) break;

                const err = Math.abs((blob.size - targetBytes) / targetBytes) * 100;

                if (err < bestErr) {
                    best = blob;
                    bestErr = err;
                }
                if (err <= TOL) {
                    return { original: file, compressed: blob, sizeError: err.toFixed(1), extension: extension };
                }

                if (blob.size > targetBytes) {
                    maxQ = q;
                } else {
                    minQ = q;
                }

                const nextQ = (minQ + maxQ) / 2;

                if (Math.abs(nextQ - q) < 0.01) {
                    scale *= 0.9;
                    minQ = 0.12;
                    maxQ = 0.95;
                    q = 0.75;
                    continue;
                }

                q = nextQ;
            }

            return { original: file, compressed: best, sizeError: bestErr.toFixed(1), extension: extension };
        }

        // Helper functions for resizing
        function makeCanvas(w, h) {
            const c = document.createElement('canvas');
            c.width = w;
            c.height = h;
            return c;
        }

        async function createBitmap(file) {
            if (window.createImageBitmap) {
                try {
                    return await createImageBitmap(file);
                } catch {}
            }
            return new Promise((resolve, reject) => {
                const img = new Image();
                const reader = new FileReader();
                reader.onload = () => (img.src = reader.result);
                img.onload = () => resolve(img);
                img.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        function canvasToBlob(canvas, type, q) {
            return new Promise(resolve => {
                canvas.toBlob(b => resolve(b), type, q);
            });
        }

        // Compress selected images
        async function compressSelectedImages() {
            if (state.files.length === 0) {
                alert('Please upload at least one image');
                return;
            }
            
            if (state.selectedFiles.size === 0) {
                alert('Please select at least one image to compress');
                return;
            }
            
            if (state.isProcessing) return;
            
            // Show processing state
            const originalText = compressBtn.innerHTML;
            compressBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            compressBtn.disabled = true;
            
            // Hide other buttons, show progress
            document.getElementById('actionButtons').style.display = 'none';
            progressContainer.classList.add('active');
            resultsContainer.classList.remove('active');
            
            state.isProcessing = true;
            
            const filesToProcess = Array.from(state.selectedFiles)
                .map(index => state.files[index]);
            const totalFiles = filesToProcess.length;
            
            state.processedImages = [];
            
            for (let i = 0; i < filesToProcess.length; i++) {
                const file = filesToProcess[i];
                
                if (state.resizeMethod === 'file-size') {
                    const result = await resizeImageToTargetSize(file, state.targetFileSizeBytes);
                    state.processedImages.push({
                        original: file,
                        compressed: result.compressed,
                        savings: ((file.size - result.compressed.size) / file.size * 100).toFixed(1),
                        sizeError: result.sizeError || '0',
                        extension: result.extension
                    });
                } else if (state.resizeMethod === 'quality') {
                    const result = await compressImageByQuality(file);
                    state.processedImages.push(result);
                } else {
                    let settings = state.smartCompressionSettings;
                    
                    if (state.resizeMethod !== 'smart-compression') {
                        settings = {
                            mode: 'perceptual',
                            usage: 'web',
                            balance: 50,
                            faceDetection: true,
                            textProtection: true,
                            metadataRemoval: true
                        };
                    }
                    
                    const result = await compressImage(file, settings);
                    state.processedImages.push(result);
                }
                
                updateProgress(i + 1, totalFiles);
            }
            
            // Show results and reset button
            setTimeout(() => {
                showResults();
                
                // Reset compress button
                compressBtn.innerHTML = originalText;
                compressBtn.disabled = false;
                
                console.log(`Compressed ${totalFiles} selected image(s) successfully`);
            }, 300);
        }

        // Success message function
        function showSuccessMessage(message) {
            const successMessage = document.createElement('div');
            successMessage.innerHTML = `
                <div style="
                    position: fixed;
                    bottom: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: #10b981;
                    color: white;
                    padding: 12px 24px;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
                    z-index: 1000;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    animation: slideUp 0.3s ease;
                ">
                    <i class="fas fa-check-circle"></i>
                    <span>${message}</span>
                </div>
            `;
            document.body.appendChild(successMessage);
            
            // Remove message after 3 seconds
            setTimeout(() => {
                if (successMessage.parentNode) {
                    successMessage.remove();
                }
            }, 3000);
        }

        // Download single image function
        function downloadSingleImage(image) {
            const link = document.createElement('a');
            link.href = URL.createObjectURL(image.compressed);
            const fileName = `compressed_${image.original.name.replace(/\.[^/.]+$/, '')}.${image.extension || 'jpg'}`;
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(link.href);
        }

        // Process and download all images
        async function processAndDownloadAll() {
            if (state.files.length === 0) {
                alert('Please upload at least one image');
                return;
            }
            
            if (state.isProcessing) return;
            
            // If only one image, download it directly without ZIP
            if (state.files.length === 1) {
                const file = state.files[0];
                
                // Show processing state
                downloadAllBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                downloadAllBtn.disabled = true;
                
                let result;
                if (state.resizeMethod === 'file-size') {
                    result = await resizeImageToTargetSize(file, state.targetFileSizeBytes);
                } else if (state.resizeMethod === 'quality') {
                    result = await compressImageByQuality(file);
                } else {
                    let settings = state.smartCompressionSettings;
                    if (state.resizeMethod !== 'smart-compression') {
                        settings = {
                            mode: 'perceptual',
                            usage: 'web',
                            balance: 50,
                            faceDetection: true,
                            textProtection: true,
                            metadataRemoval: true
                        };
                    }
                    result = await compressImage(file, settings);
                }
                
                // Download single image
                downloadSingleImage({
                    original: file,
                    compressed: result.compressed,
                    extension: result.extension || getFileExtension(file.name)
                });
                
                // Reset button
                downloadAllBtn.innerHTML = '<i class="fas fa-file-archive"></i> Download All Images';
                downloadAllBtn.disabled = false;
                
                showSuccessMessage('Image downloaded successfully!');
                return;
            }
            
            // For multiple images, use ZIP
            // Hide buttons, show progress
            document.getElementById('actionButtons').style.display = 'none';
            progressContainer.classList.add('active');
            resultsContainer.classList.remove('active');
            
            state.isProcessing = true;
            
            const filesToProcess = state.files; // Process all files
            const totalFiles = filesToProcess.length;
            
            state.processedImages = [];
            
            for (let i = 0; i < filesToProcess.length; i++) {
                const file = filesToProcess[i];
                
                if (state.resizeMethod === 'file-size') {
                    const result = await resizeImageToTargetSize(file, state.targetFileSizeBytes);
                    state.processedImages.push({
                        original: file,
                        compressed: result.compressed,
                        savings: ((file.size - result.compressed.size) / file.size * 100).toFixed(1),
                        sizeError: result.sizeError || '0',
                        extension: result.extension
                    });
                } else if (state.resizeMethod === 'quality') {
                    const result = await compressImageByQuality(file);
                    state.processedImages.push(result);
                } else {
                    let settings = state.smartCompressionSettings;
                    
                    if (state.resizeMethod !== 'smart-compression') {
                        settings = {
                            mode: 'perceptual',
                            usage: 'web',
                            balance: 50,
                            faceDetection: true,
                            textProtection: true,
                            metadataRemoval: true
                        };
                    }
                    
                    const result = await compressImage(file, settings);
                    state.processedImages.push(result);
                }
                
                updateProgress(i + 1, totalFiles);
            }
            
            setTimeout(() => {
                showResults();
                downloadAllProcessedImages();
                showSuccessMessage(`Downloaded ${totalFiles} image(s) as ZIP`);
            }, 300);
        }

        // Process and download selected images
        async function processAndDownloadSelected() {
            if (state.files.length === 0) {
                alert('Please upload at least one image');
                return;
            }
            
            if (state.selectedFiles.size === 0) {
                alert('Please select at least one image to process');
                return;
            }
            
            if (state.isProcessing) return;
            
            // If only one image selected, download it directly without ZIP
            if (state.selectedFiles.size === 1) {
                const fileIndex = Array.from(state.selectedFiles)[0];
                const file = state.files[fileIndex];
                
                // Show processing state
                downloadSelectedBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                downloadSelectedBtn.disabled = true;
                
                let result;
                if (state.resizeMethod === 'file-size') {
                    result = await resizeImageToTargetSize(file, state.targetFileSizeBytes);
                } else if (state.resizeMethod === 'quality') {
                    result = await compressImageByQuality(file);
                } else {
                    let settings = state.smartCompressionSettings;
                    if (state.resizeMethod !== 'smart-compression') {
                        settings = {
                            mode: 'perceptual',
                            usage: 'web',
                            balance: 50,
                            faceDetection: true,
                            textProtection: true,
                            metadataRemoval: true
                        };
                    }
                    result = await compressImage(file, settings);
                }
                
                // Download single image
                downloadSingleImage({
                    original: file,
                    compressed: result.compressed,
                    extension: result.extension || getFileExtension(file.name)
                });
                
                // Reset button
                downloadSelectedBtn.innerHTML = '<i class="fas fa-download"></i> Select & Download';
                downloadSelectedBtn.disabled = false;
                
                showSuccessMessage('Image downloaded successfully!');
                return;
            }
            
            // For multiple images, use ZIP
            // Hide buttons, show progress
            document.getElementById('actionButtons').style.display = 'none';
            progressContainer.classList.add('active');
            resultsContainer.classList.remove('active');
            
            state.isProcessing = true;
            
            const filesToProcess = Array.from(state.selectedFiles)
                .map(index => state.files[index]);
            const totalFiles = filesToProcess.length;
            
            state.processedImages = [];
            
            for (let i = 0; i < filesToProcess.length; i++) {
                const file = filesToProcess[i];
                
                if (state.resizeMethod === 'file-size') {
                    const result = await resizeImageToTargetSize(file, state.targetFileSizeBytes);
                    state.processedImages.push({
                        original: file,
                        compressed: result.compressed,
                        savings: ((file.size - result.compressed.size) / file.size * 100).toFixed(1),
                        sizeError: result.sizeError || '0',
                        extension: result.extension
                    });
                } else if (state.resizeMethod === 'quality') {
                    const result = await compressImageByQuality(file);
                    state.processedImages.push(result);
                } else {
                    let settings = state.smartCompressionSettings;
                    
                    if (state.resizeMethod !== 'smart-compression') {
                        settings = {
                            mode: 'perceptual',
                            usage: 'web',
                            balance: 50,
                            faceDetection: true,
                            textProtection: true,
                            metadataRemoval: true
                        };
                    }
                    
                    const result = await compressImage(file, settings);
                    state.processedImages.push(result);
                }
                
                updateProgress(i + 1, totalFiles);
            }
            
            setTimeout(() => {
                showResults();
                downloadSelectedProcessedImages();
                showSuccessMessage(`Downloaded ${totalFiles} selected image(s) as ZIP`);
            }, 300);
        }

        function updateProgress(current, total) {
            const percent = Math.round((current / total) * 100);
            progressFill.style.width = percent + '%';
            progressText.textContent = `${percent}% (${current}/${total})`;
        }

        function showResults() {
            const totalOriginal = state.processedImages.reduce((sum, img) => sum + img.original.size, 0);
            const totalCompressed = state.processedImages.reduce((sum, img) => sum + img.compressed.size, 0);
            const savingsPercent = ((totalOriginal - totalCompressed) / totalOriginal * 100).toFixed(1);
            
            processedCount.textContent = state.processedImages.length;
            totalSavings.textContent = `${savingsPercent}%`;
            
            if (state.resizeMethod === 'file-size') {
                const avgError = state.processedImages.reduce((sum, img) => 
                    sum + Math.abs(parseFloat(img.sizeError || 0)), 0) / state.processedImages.length;
                averageQuality.textContent = `±${avgError.toFixed(1)}%`;
            } else {
                averageQuality.textContent = 'Excellent';
            }
            
            // Add a "Ready to download" message
            const resultsMessage = resultsContainer.querySelector('p');
            if (resultsMessage) {
                resultsMessage.innerHTML = `
                    <strong>Images processed successfully!</strong><br>
                    <small style="color: #6b7280;">Click "Download Selected Images" to save the compressed files</small>
                `;
            }
            
            state.isProcessing = false;
            progressContainer.classList.remove('active');
            resultsContainer.classList.add('active');
            
            // Show buttons again
            setTimeout(() => {
                document.getElementById('actionButtons').style.display = 'flex';
            }, 500);
        }

        // Download all processed images as ZIP
        async function downloadAllProcessedImages() {
            if (state.processedImages.length === 0) {
                console.error('No processed images available');
                return;
            }
            
            console.log('Creating ZIP file...');
            
            const zip = new JSZip();
            const folder = zip.folder("processed_images");
            
            for (let i = 0; i < state.processedImages.length; i++) {
                const image = state.processedImages[i];
                
                try {
                    const response = await fetch(URL.createObjectURL(image.compressed));
                    const blob = await response.blob();
                    
                    let fileName;
                    const nameOnly = image.original.name.replace(/\.[^/.]+$/, "");
                    const extension = image.extension || 'jpg';
                    
                    if (state.resizeMethod === 'file-size') {
                        fileName = `${nameOnly}_${formatKB(state.targetFileSizeKB)}.${extension}`;
                    } else if (state.resizeMethod === 'quality') {
                        fileName = `${nameOnly}_quality${state.qualityLevel}.${extension}`;
                    } else {
                        fileName = `processed_${nameOnly}.${extension}`;
                    }
                    
                    folder.file(fileName, blob);
                } catch (error) {
                    console.error('Error adding image to ZIP:', error);
                }
            }
            
            zip.generateAsync({type: "blob"})
                .then(function(content) {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(content);
                    link.download = "processed_images.zip";
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(link.href);
                    console.log('ZIP file downloaded successfully');
                })
                .catch(function(error) {
                    console.error('Error creating ZIP:', error);
                });
        }

        // Download selected processed images as ZIP
        async function downloadSelectedProcessedImages() {
            if (state.processedImages.length === 0) {
                console.error('No processed images available');
                return;
            }
            
            console.log('Creating ZIP file for selected images...');
            
            const zip = new JSZip();
            const folder = zip.folder("selected_images");
            
            for (let i = 0; i < state.processedImages.length; i++) {
                const image = state.processedImages[i];
                
                try {
                    const response = await fetch(URL.createObjectURL(image.compressed));
                    const blob = await response.blob();
                    
                    let fileName;
                    const nameOnly = image.original.name.replace(/\.[^/.]+$/, "");
                    const extension = image.extension || 'jpg';
                    
                    if (state.resizeMethod === 'file-size') {
                        fileName = `${nameOnly}_${formatKB(state.targetFileSizeKB)}.${extension}`;
                    } else if (state.resizeMethod === 'quality') {
                        fileName = `${nameOnly}_quality${state.qualityLevel}.${extension}`;
                    } else {
                        fileName = `processed_${nameOnly}.${extension}`;
                    }
                    
                    folder.file(fileName, blob);
                } catch (error) {
                    console.error('Error adding image to ZIP:', error);
                }
            }
            
            zip.generateAsync({type: "blob"})
                .then(function(content) {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(content);
                    link.download = "selected_images.zip";
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(link.href);
                    console.log('ZIP file downloaded successfully');
                })
                .catch(function(error) {
                    console.error('Error creating ZIP:', error);
                });
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // File upload events
            browseBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                fileInput.click();
            });
            
            fileInput.addEventListener('change', function(e) {
                const files = Array.from(e.target.files).filter(file => file.type.startsWith('image/'));
                if (files.length > 0) {
                    addFiles(files);
                }
                this.value = '';
            });
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = Array.from(e.dataTransfer.files).filter(file => file.type.startsWith('image/'));
                if (files.length > 0) {
                    addFiles(files);
                } else {
                    alert('Please drop image files only');
                }
            });
            
            // File management buttons
            selectAllBtn.addEventListener('click', selectAllFiles);
            deselectAllBtn.addEventListener('click', deselectAllFiles);
            clearAllBtn.addEventListener('click', clearAllFiles);
            
            // File list interactions
            fileList.addEventListener('click', (e) => {
                const fileItem = e.target.closest('.file-item');
                if (!fileItem) return;
                
                const index = parseInt(fileItem.dataset.index);
                
                if (e.target.closest('.file-remove-btn')) {
                    e.stopPropagation();
                    state.files.splice(index, 1);
                    state.selectedFiles.delete(index);
                    
                    const newSelected = new Set();
                    state.selectedFiles.forEach(value => {
                        if (value > index) {
                            newSelected.add(value - 1);
                        } else if (value < index) {
                            newSelected.add(value);
                        }
                    });
                    state.selectedFiles = newSelected;
                    
                    state.previewCache.clear();
                    updateFileSizeSliderMax();
                    
                    // Hide results when files are removed
                    hideResultsContainer();
                    
                    renderFileList();
                } else if (e.target.closest('.file-checkbox') || e.target.closest('.file-item:not(.file-actions *)')) {
                    if (state.selectedFiles.has(index)) {
                        state.selectedFiles.delete(index);
                    } else {
                        state.selectedFiles.add(index);
                    }
                    renderFileList();
                }
            });
            
            // Main tabs switching
            mainTabs.forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab.dataset.tab));
            });
            
            // Quality controls
            qualitySliderTab.addEventListener('input', updateQualityDisplay);
            qualityPresets.forEach(preset => {
                preset.addEventListener('click', () => {
                    const quality = parseInt(preset.dataset.quality);
                    qualitySliderTab.value = quality;
                    updateQualityDisplay();
                });
            });
            
            // Smart compression controls
            smartBalanceSlider.addEventListener('input', updateSmartCompressionDisplay);
            faceDetection.addEventListener('change', () => {
                state.smartCompressionSettings.faceDetection = faceDetection.checked;
            });
            textProtection.addEventListener('change', () => {
                state.smartCompressionSettings.textProtection = textProtection.checked;
            });
            metadataRemoval.addEventListener('change', () => {
                state.smartCompressionSettings.metadataRemoval = metadataRemoval.checked;
            });
            
            // Mode tabs
            modeTabs.querySelectorAll('.tab-option').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    modeTabs.querySelectorAll('.tab-option').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    state.smartCompressionSettings.mode = tab.dataset.mode;
                    updateSmartCompressionDisplay();
                });
            });
            
            // Usage tabs
            usageTabs.querySelectorAll('.tab-option').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    usageTabs.querySelectorAll('.tab-option').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    state.smartCompressionSettings.usage = tab.dataset.usage;
                    updateSmartCompressionDisplay();
                });
            });
            
            // Settings toggle
            settingsToggle.addEventListener('click', () => {
                const isActive = smartSettingsContent.classList.toggle('active');
                settingsIcon.classList.toggle('fa-chevron-down', !isActive);
                settingsIcon.classList.toggle('fa-chevron-up', isActive);
            });
            
            // File size controls
            fileSizeSlider.addEventListener('input', () => {
                const sizeKB = parseInt(fileSizeSlider.value);
                setTargetFileSize(sizeKB);
            });
            sizePresets.forEach(preset => {
                preset.addEventListener('click', () => {
                    const sizeKB = parseInt(preset.dataset.size);
                    setTargetFileSize(sizeKB);
                });
            });
            
            // Percentage controls
            percentageSlider.addEventListener('input', () => {
                setPercentage(percentageSlider.value);
            });
            percentagePresets.forEach(preset => {
                preset.addEventListener('click', () => {
                    setPercentage(preset.dataset.percentage);
                });
            });
            
            // DPI controls
            dpiSlider.addEventListener('input', () => {
                setDPI(dpiSlider.value);
            });
            dpiPresets.forEach(preset => {
                preset.addEventListener('click', () => {
                    setDPI(preset.dataset.dpi);
                });
            });
            
            // Action buttons
            compressBtn.addEventListener('click', compressSelectedImages);
            previewBtn.addEventListener('click', () => {
                if (state.files.length > 0 && state.selectedFiles.size > 0) {
                    alert('Preview functionality would open a modal to compare images');
                    // You can implement the preview modal here
                }
            });
            downloadSelectedBtn.addEventListener('click', processAndDownloadSelected);
            downloadAllBtn.addEventListener('click', processAndDownloadAll);
            
            // Initialize display
            updateQualityDisplay();
            updateSmartCompressionDisplay();
            updateFileSizeSliderMax();
            updateButtonStates();
            updateBlurState();
        }
        
        // Initialize
        setupEventListeners();
    }
});

</script>
</body>
</html>
